sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("cba.hr.sdvCalibracaoSF.controller.CalibrationSessions",{onInit:function(){sap.ui.core.BusyIndicator.show(0);this.getPendingCalibrationSessions()},setSfUser:function(e){this._sfUser=e},getSfUser:function(){return this._sfUser},getPendingCalibrationSessions:function(){var e=this;var s=this.getOwnerComponent().getModel("ECC");s.read("/Usuarios('"+this.getUserFiori()+"')",{success:function(s){var t=e.getView().byId("CalibrationSessionTable");var i=e.getOwnerComponent().getModel("SFactors");var r=[];e.setSfUser(s.SfUser);r.push(new sap.ui.model.Filter("ownerId","EQ",e.getSfUser()));i.read("/CalibrationSession",{urlParameters:{$select:"sessionId,sessionName"},filters:r,success:function(e){var s=new sap.ui.model.json.JSONModel(e);s.setData(e);t.setModel(s);t.bindAggregation("items",{path:"/results",template:t.getBindingInfo("items").template});sap.ui.core.BusyIndicator.hide()},error:function(){sap.ui.core.BusyIndicator.hide()}})},error:function(e){sap.ui.core.BusyIndicator.hide();sap.m.MessageToast.show(JSON.parse(e.responseText).error.message.value)}})},getUserFiori:function(){var e=new sap.ui.model.json.JSONModel;e.loadData("/sap/bc/ui2/start_up?","",false);return e.getData().id?e.getData().id:""},onExibirSessaoPress:function(e){var s=e.getSource().data("sessionId");var t=sap.ui.core.UIComponent.getRouterFor(this);t.navTo("TargetCalibrationRoom",{calibrationSessionId:s,calibrationOwnerId:this.getSfUser()})}})});