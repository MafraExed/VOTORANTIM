sap.ui.define(["Y5GL_DECLARACOES/Y5GL_DECLARACOES/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/FilterOperator","sap/m/GroupHeaderListItem","sap/ui/Device","sap/ui/core/Fragment","Y5GL_DECLARACOES/Y5GL_DECLARACOES/model/formatter"],function(e,t,a,i,o,r,n,l,s,u){"use strict";var c;var d;return e.extend("Y5GL_DECLARACOES.Y5GL_DECLARACOES.controller.Master",{formatter:u,onInit:function(){var e=this.byId("list"),t=this._createViewModel(),a=e.getBusyIndicatorDelay();this._oList=e;this._oListFilterState={aFilter:[],aSearch:[]};this.setModel(t,"masterView");e.attachEventOnce("updateFinished",function(){t.setProperty("/delay",a)});this.getView().addEventDelegate({onBeforeFirstShow:function(){}.bind(this)});this.getRouter().getRoute("master").attachPatternMatched(this._onMasterMatched,this);this.getRouter().attachBypassed(this.onBypassed,this)},onRefresh:function(){this._oList.getBinding("items").refresh()},onSelectionChange:function(e){var t=e.getSource(),a=e.getParameter("selected");if(!(t.getMode()==="MultiSelect"&&!a)){this._showDetail(e.getParameter("listItem")||e.getSource())}},_createViewModel:function(){return new t({isFilterBarVisible:false,filterBarLabel:"",delay:0,title:this.getResourceBundle().getText("masterTitleCount",[0]),noDataText:this.getResourceBundle().getText("masterListNoDataText"),sortBy:"TpDec",groupBy:"None"})},_onMasterMatched:function(){this.getModel("appView").setProperty("/layout","OneColumn")},_showDetail:function(e){c=e.getBindingContext().getProperty("TpDec");d=e.getBindingContext().getProperty("Pernr");var t="-";if(c==="001"){this.AbreDialogSave()}else if(c==="007"){this.AbreDialogTreinamento()}else{this.GeraPDF(t)}},AbreDialogSave:function(){var e=this;if(!e._valueHelpDialog1){e._valueHelpDialog1=sap.ui.xmlfragment("Y5GL_DECLARACOES.Y5GL_DECLARACOES.view.Declaracoes",e);e.getView().addDependent(e._valueHelpDialog1)}e._valueHelpDialog1.open()},AbreDialogTreinamento:function(){var e=this;if(!e._valueHelpDialog2){e._valueHelpDialog2=sap.ui.xmlfragment("Y5GL_DECLARACOES.Y5GL_DECLARACOES.view.Treinamentos",e);e.getView().addDependent(e._valueHelpDialog2)}e._valueHelpDialog2.open()},onAdd:function(){this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getRouter().navTo("Add")},GeraPDF:function(e){var t="/sap/opu/odata/sap/ZGWGLHR_FERIAS_ESS_SRV/ZET_GLHR_DECLARADETSet(TpDec='"+c+"',Pernr='"+d+"',Tipo='"+e+"')/$value";var a=document.createElement("a");a.href=t;a.target="_blank";a.style.display="none";document.body.appendChild(a);a.click();document.body.removeChild(a)},onConfirmDocumento:function(e){var t=e.getParameter("selectedItem");var a=t.getTitle();this.GeraPDF(a)},onConfirmDeclaracoes:function(e){var t=e.getParameter("selectedItem");var a=t.getDescription();this.GeraPDF(a)},BackInicial:function(e){var t="https://fioridev.votorantim.com.br/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html#Shell-home";window.open(t);window.close()},formatterIcon:function(e){var t=jQuery.sap.getModulePath("Y5GL_DECLARACOES.Y5GL_DECLARACOES");var a=t+"/Icones/";var i;i=a+"DECLARACOES.png";return i}})});