sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter"],function(e,t,a){"use strict";var r;var i;var n;var s;var o;return e.extend("Y5VC_PAINEL_NE2.Y5VC_PAINEL_NE2.controller.Items",{formatter:a,onInit:function(){var e,a=new t({busy:true,delay:0});this.getRouter().getRoute("Items").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(a,"ItemsView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){a.setProperty("/delay",e)})},_onObjectMatched:function(e){r=e.getParameter("arguments").Fikrs;i=e.getParameter("arguments").Belnr;n=e.getParameter("arguments").Bukrs;s=e.getParameter("arguments").Gjahr;o=e.getParameter("arguments").Buzei;var t=this.getView().byId("IdHist");t.rebindTable("e")},BeforeTable:function(e){e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Fikrs",operator:"EQ",value1:r}));e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Belnr",operator:"EQ",value1:i}));e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Bukrs",operator:"EQ",value1:n}));e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Gjahr",operator:"EQ",value1:s}));e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Buzei",operator:"EQ",value1:o}))},_bindView:function(e){var t=this.getModel("ItemsView"),a=this.getModel();this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){a.metadataLoaded().then(function(){t.setProperty("/busy",true)})},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getModel("ItemsView"),a=e.getElementBinding();if(!a.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");return}var r=this.getResourceBundle(),i=e.getBindingContext().getObject(),n=i.Belnr,s=i.Cliente;t.setProperty("/busy",false);this.addHistoryEntry({title:this.getResourceBundle().getText("objectTitle")+" - "+s,icon:"sap-icon://enter-more",intent:"#Y5VC_PAINEL_NE2-display&/ZET_VCFI_HIST_NEGSet/"+n});t.setProperty("/saveAsTileTitle",r.getText("saveAsTileTitle",[s]));t.setProperty("/shareOnJamTitle",s);t.setProperty("/shareSendEmailSubject",r.getText("shareSendEmailObjectSubject",[n]));t.setProperty("/shareSendEmailMessage",r.getText("shareSendEmailObjectMessage",[s,n,location.href]))}})});