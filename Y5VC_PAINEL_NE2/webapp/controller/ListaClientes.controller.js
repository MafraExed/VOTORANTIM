sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter"],function(e,t,a){"use strict";var i;var r;var n;var s;return e.extend("Y5VC_PAINEL_NE2.Y5VC_PAINEL_NE2.controller.ListaClientes",{formatter:a,onInit:function(){var e,a=new t({busy:true,delay:0});this.getRouter().getRoute("ListaClientes").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(a,"ListaClientesView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){a.setProperty("/delay",e)})},_onObjectMatched:function(e){i=e.getParameter("arguments").Kunnr;r=e.getParameter("arguments").stcd1;n=e.getParameter("arguments").stcd2;s=e.getParameter("arguments").kkber;var t=this.getView().byId("IdList");t.rebindTable("e")},BeforeTable:function(e){if(i!==""){e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Kunnr",operator:"EQ",value1:i}))}if(r!==""){e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Stcd1",operator:"EQ",value1:r}))}if(n!==""){e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Stcd2",operator:"EQ",value1:n}))}if(s!==""){e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Kkber",operator:"EQ",value1:s}))}e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"NivelDet",operator:"EQ",value1:"X"}))},_bindView:function(e){var t=this.getModel("ListaClientesView"),a=this.getModel();this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){a.metadataLoaded().then(function(){t.setProperty("/busy",true)})},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getModel("ListaClientesView"),a=e.getElementBinding();if(!a.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");return}var i=this.getResourceBundle(),r=e.getBindingContext().getObject(),n=r.Belnr,s=r.Cliente;t.setProperty("/busy",false);this.addHistoryEntry({title:this.getResourceBundle().getText("objectTitle")+" - "+s,icon:"sap-icon://enter-more",intent:"#Y5VC_PAINEL_NE2-display&/ZET_VCFI_COD_CLISet/"+n});t.setProperty("/saveAsTileTitle",i.getText("saveAsTileTitle",[s]));t.setProperty("/shareOnJamTitle",s);t.setProperty("/shareSendEmailSubject",i.getText("shareSendEmailObjectSubject",[n]));t.setProperty("/shareSendEmailMessage",i.getText("shareSendEmailObjectMessage",[s,n,location.href]))}})});