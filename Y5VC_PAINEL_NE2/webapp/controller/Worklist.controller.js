sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/Button","sap/ui/model/Sorter","sap/m/Text","sap/m/MessageBox","sap/m/Dialog","sap/m/QuickViewGroupElement"],function(e,t,a,r,i,n,s,o,g,l,d){"use strict";var u;var c;var h;var b;var v;var p;var m;var S;var I;var f;var B;return e.extend("Y5VC_PAINEL_NE2.Y5VC_PAINEL_NE2.controller.Worklist",{formatter:a,onInit:function(){var e,a,r=this.byId("table");a=r.getBusyIndicatorDelay();this._aTableSearchState=[];e=new t({worklistTableTitle:this.getResourceBundle().getText("worklistTableTitle"),saveAsTileTitle:this.getResourceBundle().getText("saveAsTileTitle",this.getResourceBundle().getText("worklistViewTitle")),shareOnJamTitle:this.getResourceBundle().getText("worklistTitle"),shareSendEmailSubject:this.getResourceBundle().getText("shareSendEmailWorklistSubject"),shareSendEmailMessage:this.getResourceBundle().getText("shareSendEmailWorklistMessage",[location.href]),tableNoDataText:this.getResourceBundle().getText("tableNoDataText"),tableBusyDelay:0});this.setModel(e,"worklistView");this.loading(false);var i=this.byId("quickViewCard");i.setShowVerticalScrollBar(true);r.attachEventOnce("updateFinished",function(){e.setProperty("/tableBusyDelay",a)});this.getRouter().getRoute("worklist").attachPatternMatched(this._atttable,this);this.addHistoryEntry({title:this.getResourceBundle().getText("worklistViewTitle"),icon:"sap-icon://table-view",intent:"#Y5VC_PAINEL_NE2-display"},true)},_atttable:function(e){this.getView().getModel().refresh(true)},getUrlParam:function(e){let t=window.location.href.substring(window.location.href.indexOf(e+"=")+e.length+1);if(t.indexOf("&")!==-1)t=t.substring(0,t.indexOf("&"));return t.toLowerCase()},filterbarInitialized:function(e){let t=false;let a;let r;if(window.location.href.indexOf("aaf=")!==-1&&window.location.href.indexOf("cliente=")!==-1){a=this.getUrlParam("aaf");r=this.getUrlParam("cliente");t=true}if(this._varChanged)return;const i=this.byId("ST_SmartFilterBar").getVariantManagement();const n=i.getVariantItems();for(const e of n){if(t){if(e.getText().toLowerCase()===a){this._varChanged=true;i.setCurrentVariantId(e.getKey());break}}e.setProperty("readOnly",false)}if(t){const e=this.byId("ST_SmartFilterBar").getFilterData();if(r.indexOf(",")===-1){e.Kunnr=r;this.byId("ST_SmartFilterBar").setFilterData(e)}window.history.pushState("","",window.location.href.substring(0,window.location.href.lastIndexOf("?")));this.byId("ST_SmartFilterBar").search()}},onUpdateFinished:function(e){var t,a=e.getSource(),r=e.getParameter("total");if(r&&a.getBinding("items").isLengthFinal()){t=this.getResourceBundle().getText("worklistTableTitleCount",[r])}else{t=this.getResourceBundle().getText("worklistTableTitle")}this.getModel("worklistView").setProperty("/worklistTableTitle",t)},onPress:function(e){this._showObject(e.getSource())},formatHighLight:function(e){if(e==="RN"){return"Success"}else if(e==="VN"){return"Error"}else{return"None"}},buscaImagem:function(){var e=jQuery.sap.getModulePath("Y5VC_PAINEL_NE2.Y5VC_PAINEL_NE2");var t=e+"/imagens/voto_load.gif";this.getView().byId("idimg").setSrc(t);this.getView().byId("idimg").addStyleClass("CLASSE_VSA")},onShareInJamPress:function(){var e=this.getModel("worklistView"),t=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:location.href,share:e.getProperty("/shareOnJamTitle")}}});t.open()},onSearch:function(e){if(e.getParameters().refreshButtonPressed){this.onRefresh()}else{var t=[];var a=e.getParameter("query");if(a&&a.length>0){t=[new r("Kunnr",i.Contains,a)]}this._applySearch(t)}},AfterUpdate1:function(e){var t=this.getView().byId("table").getBinding("rows").getLength();if(t===0){this.getView().byId("idHor").setVisible(false);return}this.getView().byId("idHor").setVisible(true);var a;for(var n=0;n<this.getView().byId("ST_SmartFilterBar").getFilterData().Land1.ranges.length;n++){if(n===0){a=this.getView().byId("ST_SmartFilterBar").getFilterData().Land1.ranges[n].value1}else{a=a+";"+this.getView().byId("ST_SmartFilterBar").getFilterData().Land1.ranges[n].value1}}var s;for(n=0;n<this.getView().byId("ST_SmartFilterBar").getFilterData().Bukrs.ranges.length;n++){if(n===0){s=this.getView().byId("ST_SmartFilterBar").getFilterData().Bukrs.ranges[n].value1}else{s=s+";"+this.getView().byId("ST_SmartFilterBar").getFilterData().Bukrs.ranges[n].value1}}var o;for(n=0;n<this.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges.length;n++){if(n===0){o=this.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges[n].value1}else{o=o+";"+this.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges[n].value1}}I=this.getView().byId("ST_SmartFilterBar").getFilterData().Fikrs;c=this.getView().byId("ST_SmartFilterBar").getFilterData().Kunnr;var g=this.getView().byId("ST_SmartFilterBar").getFilterData().Stcd1;var l=this.getView().byId("ST_SmartFilterBar").getFilterData().Stcd2;var u=this.getView().byId("idSel").getSelectedKey();if(g===""||!g){g="X"}if(l===""||!l){l="X"}if(c===""){c="X"}var h=this.getView().getModel();h.setProperty("/busy",true);this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ZET_VCFI_DADOS_GERAISSet",{Kunnr:c,Stcd1:g,Stcd2:l,Land1:a,Fikrs:I,NivelDet:u,Bukrs:s,Kkber:o});this._bindView("/"+e)}.bind(this));var b=this.byId("idQuickViewGroup");var v=new d({label:"{}",value:"{}",type:"{}"});if(c!=="X"&&c!==""){b.bindAggregation("elements",{path:"/ZET_VCFI_CONTATO_CLISet",filters:[new r("Kunnr",i.EQ,c),new r("Kkber",i.EQ,o),new r("NivelDet",i.EQ,u)],template:new d({label:"{ContTyp}",value:"{Contat}   {Tag}",type:"text"})})}},_bindView:function(e){var t=this.getView().getModel(),a=this.getModel();this.buscaImagem();var r=this;this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){a.metadataLoaded().then(function(){r.loading(true)})},dataReceived:function(){r.loading(false);r.getView().byId("idHor").setVisible(true)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getView().getModel(),a=e.getElementBinding();if(!a.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");return}var r=this.getResourceBundle(),i=e.getBindingContext().getObject(),n=i.Reserva,s=i.Item;this.addHistoryEntry({title:this.getResourceBundle().getText("objectTitle")+" - "+s,icon:"sap-icon://enter-more",intent:"#Resgistraraceitedebaixasporreserva-display&/ZET_VCFI_DADOSGERAISSet/"+n})},AfterUpdate2:function(e){var t=this.getView().byId("ST_SmartFilterBar").getFilterData().Kunnr;var a=this.getView().byId("ST_SmartFilterBar").getFilterData();var r=this.getView().byId("IdKunnr").getValue();var i=this.getView().byId("IdStcd1").getValue();var n=this.getView().byId("IdStcd2").getValue();var s=this.byId("table2");s.getParameter("bindingParams").filters.push(r,t,a,i,n);s.getBinding("items").filter([r,t,a,i,n])},TitCobraBeforeRebindTable:function(e){var t=this.getView().byId("idSel").getSelectedKey();e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"NivelDet",operator:"EQ",value1:t}));if(h===1){h="";e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Status",operator:"EQ",value1:"VN"}))}if(b===1){b="";e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Status",operator:"EQ",value1:"AV"}))}if(v===1){v="";e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Status",operator:"EQ",value1:"PM"}))}var a=e.getParameter("bindingParams");a.sorter.push(new sap.ui.model.Sorter("Belnr",true))},onHelpKunnr:function(e){var t=e.getSource().getValue();this.inputId=e.getSource().getId();if(!this._valueHelpDialog1){this._valueHelpDialog1=sap.ui.xmlfragment("Y5VC_PAINEL_NE2.Y5VC_PAINEL_NE2.view.Kunnr",this);this.getView().addDependent(this._valueHelpDialog1)}this._valueHelpDialog1.open(t)},handleSuggest:function(e){var t=e.getParameter("suggestValue");var a=[];if(t){a.push(new r("Kunnr",sap.ui.model.FilterOperator.Contains,t))}e.getSource().getBinding("suggestionItems").filter(a)},handleSuggeststcd1:function(e){var t=e.getParameter("suggestValue");var a=[];if(t){a.push(new r("Stcd1",sap.ui.model.FilterOperator.Contains,t))}e.getSource().getBinding("suggestionItems").filter(a)},handleSuggeststcd2:function(e){var t=e.getParameter("suggestValue");var a=[];if(t){a.push(new r("Stcd2",sap.ui.model.FilterOperator.Contains,t))}e.getSource().getBinding("suggestionItems").filter(a)},_handleValueHelpClose:function(e){var t=e.getParameter("selectedItem");this._valueHelpDialog1=null;this._valueHelpDialog4=null;this._valueHelpDialog6=null;this._valueHelpDialog3=null;this._valueHelpDialog2=null;this._valueHelpDialog7=null;if(t){var a=this.getView().byId(this.inputId);a.setValue(t.getTitle())}e.getSource().getBinding("items").filter([]);this.getView().byId(this.inputId).setValueState("None")},onSearchKunnr:function(e){var t=e.getParameter("value");if(!t){t=" "}var a=t;var r=new sap.ui.model.Filter("Kunnr",sap.ui.model.FilterOperator.Contains,a);e.getSource().getBinding("items").filter([r])},OnClear2:function(e){var t=this.getView().byId("IdTpVeiculo").getValue();var a=new sap.ui.model.json.JSONModel;var r="/sap/opu/odata/sap/ZGWCBLE_REMESSA_SAIDA_SRV/ZET_CBMM_CF_VEIC_HSet/$count?$filter=Matnr eq '"+t+"'";r=encodeURI(r);a.loadData(r,null,false,"GET",false,false,null);var i=a.getData();if(i<1){sap.m.MessageToast.show("Veículo inválido!");this.getView().byId("IdTpVeiculo").setValueState("Error");return}this.getView().byId("IdTpVeiculo").setValueState("None");r="/sap/opu/odata/sap/ZGWCBLE_REMESSA_SAIDA_SRV/ZET_CBMM_CF_VEIC_HSet(Matnr='"+t+"')";r=encodeURI(r);a.loadData(r,null,false,"GET",false,false,null);this.getView().byId("IdCapa").setValue(a.oData.d.Capa);this.getView().byId("IdUM").setValue(a.oData.d.Um)},Partida:function(){u=1;var e=this.getView().byId("it_items2");e.rebindTable("e")},Vencidas:function(){h=1;var e=this.getView().byId("it_items2");e.rebindTable("e")},Avencer:function(){b=1;var e=this.getView().byId("it_items2");e.rebindTable("e")},Prometido:function(){v=1;var e=this.getView().byId("it_items2");e.rebindTable("e")},Lista:function(){var e=this.getView().byId("ST_SmartFilterBar").getFilterData().Kunnr;var t=this.getView().byId("ST_SmartFilterBar").getFilterData().Stcd1;var a=this.getView().byId("ST_SmartFilterBar").getFilterData().Stcd2;var r=this.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges[0].value1;this.getRouter().navTo("ListaClientes",{Kunnr:e,stcd1:t,stcd2:a,kkber:r})},ConsultHist:function(e){var t=this.getView().byId("table").getSelectedIndices();var a=this.getView().byId("table");var r=this;if(this.getView().byId("table").getBinding("rows").getLength()<1){sap.m.MessageBox.error("Não é possível navegar, nenhum documento foi carregado");return}var i=new Date;i.setDate(i.getDate()-540);var n=i.toLocaleDateString();n=n.replace("/",".");n=n.replace("/",".");var s=new Date;var o=s.toLocaleDateString();o=o.replace("/",".");o=o.replace("/",".");var g=this.getView().byId("ST_SmartFilterBar").getFilterData().Fikrs;var l=a.getContextByIndex(0).getObject().Syst;var d=r.getView().byId("table").getContextByIndex(0).getObject().Knkli;if(l==="E05"){sap.m.URLHelper.redirect("http://vide0502.votorantim.grupo:8005/sap/bc/gui/sap/its/webgui/?~transaction=ZGLFI784%20S_FIKRS-LOW="+g+";S_KNKLI-LOW="+d+";S_DTCRI-LOW="+n+";S_DTCRI-HIGH="+o+";&~okcode=ONLI",true)}else if(l==="E04"){sap.m.URLHelper.redirect("http://vide0401.votorantim.grupo:8004/sap/bc/gui/sap/its/webgui/?~transaction=ZGLFI784%20S_FIKRS-LOW="+g+";S_KNKLI-LOW="+d+";S_DTCRI-LOW="+n+";S_DTCRI-HIGH="+o+";&~okcode=ONLI",true)}},Cred:function(e){var t=this.getView().byId("table").getSelectedIndices();var a=this.getView().byId("table");var r=this;if(this.getView().byId("table").getBinding("rows").getLength()<1){sap.m.MessageBox.error("Não é possível navegar, nenhum documento foi carregado");return}var i=this.getView().byId("ST_SmartFilterBar").getFilterData().Kunnr;var n=this.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges[0].value1;var s=a.getContextByIndex(0).getObject().Syst;if(s==="E05"){sap.m.URLHelper.redirect("http://vide0502.votorantim.grupo:8005/sap/bc/gui/sap/its/webgui/?~transaction=FD33%20RF02L-KUNNR="+i+";RF02L-KKBER="+n+";RF02L-D0105=X;RF02L-D0110=X;RF02L-D0210=X;RF02L-D0220=X&~okcode=/00",true)}else if(s==="E04"){sap.m.URLHelper.redirect("http://vide0401.votorantim.grupo:8004/sap/bc/gui/sap/its/webgui/?~transaction=FD33%20RF02L-KUNNR="+i+";RF02L-KKBER="+n+";RF02L-D0105=X;RF02L-D0110=X;RF02L-D0210=X;RF02L-D0220=X&~okcode=/00",true)}},RegCont:function(e){var t=this.getView().byId("table").getSelectedIndices();var a=this.getView().byId("table");var r=this;if(this.getView().byId("table").getBinding("rows").getLength()<1){sap.m.MessageBox.error("Não é possível registrar contato, nenhum documento foi carregado");return}if(t.length<1){var i="Nenhum item selecionado, gravar nota geral?";var s=new l({title:"Confirmação",type:"Message",content:new o({text:i}),beginButton:new n({text:"Sim",press:function(){var e=r.getView().byId("table").getContextByIndex(0).getObject().Kunnr2;var t=r.getView().byId("table").getContextByIndex(0).getObject().Knkli;var a=r.getView().byId("ST_SmartFilterBar").getFilterData().Stcd1;var i=r.getView().byId("ST_SmartFilterBar").getFilterData().Stcd2;var n=r.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges[0].value1;var o=r.getView().byId("ST_SmartFilterBar").getFilterData().Fikrs;var g="X";r.getRouter().navTo("RegContato",{Kunnr:e,Knkli:t,stcd1:a,stcd2:i,kkber:n,Fikrs:o,Geral:g});s.close()}}),endButton:new n({text:"Cancelar",press:function(){s.close()}}),afterClose:function(){s.destroy()}});s.open()}else{i="Registrar notas para os documentos selecionados?";s=new l({title:"Confirmação",type:"Message",content:new o({text:i}),beginButton:new n({text:"Sim",press:function(){var e;var i;var n;var o;var g;var l;var d;var u;var c;var h;for(var b=0;b<t.length;b++){i=r.getView().byId("table").getContextByIndex(0).getObject().Knkli;g=a.getContextByIndex([t[b]]).getObject().Kkber;l=a.getContextByIndex([t[b]]).getObject().Fikrs;if(b===0){e=a.getContextByIndex([t[b]]).getObject().Kunnr;d=a.getContextByIndex([t[b]]).getObject().Bukrs;u=a.getContextByIndex([t[b]]).getObject().Belnr;c=a.getContextByIndex([t[b]]).getObject().Buzei;h=a.getContextByIndex([t[b]]).getObject().Gjahr}else{e=e+";"+a.getContextByIndex([t[b]]).getObject().Kunnr;d=d+";"+a.getContextByIndex([t[b]]).getObject().Bukrs;u=u+";"+a.getContextByIndex([t[b]]).getObject().Belnr;c=c+";"+a.getContextByIndex([t[b]]).getObject().Buzei;h=h+";"+a.getContextByIndex([t[b]]).getObject().Gjahr}}r.getRouter().navTo("RegContato",{Kunnr:e,Knkli:i,stcd1:n,stcd2:o,kkber:g,Fikrs:l,Belnr:u,Bukrs:d,Buzei:c,Gjahr:h});s.close()}}),endButton:new n({text:"Cancelar",press:function(){s.close()}}),afterClose:function(){s.destroy()}});s.open()}},SimReneg:function(e){var t=this.getView().byId("table");var a=t.getContextByIndex(0).getObject().Syst;if(a==="E05"){sap.m.URLHelper.redirect("http://vide0502.votorantim.grupo:8005/sap/bc/gui/sap/its/webgui/?~transaction=ZGLFI637%20&~okcode=ONLI",true)}else if(a==="E04"){sap.m.URLHelper.redirect("http://vide0401.votorantim.grupo:8004/sap/bc/gui/sap/its/webgui/?~transaction=ZGLFI637%20&~okcode=ONLI",true)}},EmiBol:function(e){var t=this.getView().byId("table").getSelectedIndices();var a=this.getView().byId("table");if(t.length<1){sap.m.MessageBox.error("Nenhum item selecionado");return}if(t.length>1){sap.m.MessageBox.error("Selecionar apenas um item");return}var r=a.getContextByIndex([t[0]]).getObject().Bukrs;var i=a.getContextByIndex([t[0]]).getObject().Belnr;var n=a.getContextByIndex([t[0]]).getObject().Gjahr;var s=a.getContextByIndex([t[0]]).getObject().Zlsch;var o="X";var g=a.getContextByIndex([t[0]]).getObject().Syst;if(g==="E05"){sap.m.URLHelper.redirect("http://vide0502.votorantim.grupo:8005/sap/bc/gui/sap/its/webgui/?~transaction=ZVCFI5109_004%20P_BUKRS="+r+";P_BELNR="+i+";P_GJAHR="+n+";P_ZLSCH="+s+";P_REIMP="+o,true)}else if(g==="E04"){sap.m.URLHelper.redirect("http://vide040.votorantim.grupo:8004/sap/bc/gui/sap/its/webgui/?~transaction=ZVCFI5109_004%20P_BUKRS="+r+";P_BELNR="+i+";P_GJAHR="+n+";P_ZLSCH="+s+";P_REIMP="+o,true)}},EditarContato:function(e){var t;for(var a=0;a<this.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges.length;a++){if(a===0){t=this.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges[a].value1}else{t=t+";"+this.getView().byId("ST_SmartFilterBar").getFilterData().Kkber.ranges[a].value1}}var r=this.getView().byId("ST_SmartFilterBar").getFilterData().Kunnr;var i=this.getView().byId("ST_SmartFilterBar").getFilterData().Stcd1;var n=this.getView().byId("ST_SmartFilterBar").getFilterData().Stcd2;var s=this.getView().byId("ST_SmartFilterBar").getFilterData().Fikrs;var o=this.getView().byId("idSel").getSelectedKey();this.getRouter().navTo("EditarContatos",{Kunnr:r,stcd1:i,stcd2:n,Kkber:t,Fikrs:s,NivelDet:o})},LinkDoc:function(e){var t=e.getSource().getText();var a=e.getSource().getBindingContext().getObject().Syst;if(a==="E05"){sap.m.URLHelper.redirect("http://vide0502.votorantim.grupo:8005/sap/bc/gui/sap/its/webgui/?~transaction=VF03%20VBRK-VBELN="+t+"&~okcode=/00",true)}else if(a==="E04"){sap.m.URLHelper.redirect("http://vide0401.votorantim.grupo:8004/sap/bc/gui/sap/its/webgui/?~transaction=VF03%20VBRK-VBELN="+t+"&~okcode=/00",true)}},LinkDocBelnr:function(e){var t=e.getSource().getBindingContext().getObject().Bukrs;var a=e.getSource().getBindingContext().getObject().Belnr;var r=e.getSource().getBindingContext().getObject().Gjahr;var i=e.getSource().getBindingContext().getObject().Syst;if(i==="E05"){sap.m.URLHelper.redirect("http://vide0502.votorantim.grupo:8005/sap/bc/gui/sap/its/webgui/?~transaction=FB03%20RF05L-BELNR="+a+";RF05L-BUKRS="+t+";RF05L-GJAHR="+r+"&~okcode=/00",true)}else if(i==="E04"){sap.m.URLHelper.redirect("http://vide0401.votorantim.grupo:8004/sap/bc/gui/sap/its/webgui/?~transaction=FB03%20RF05L-BELNR="+a+";RF05L-BUKRS="+t+";RF05L-GJAHR="+r+"&~okcode=/00",true)}},VisualizarNotas:function(e){var t=this.getView().byId("table4").getSelectedIndices();var a=this.getView().byId("table4");if(t.length<1){sap.m.MessageBox.error("Nenhum item selecionado");return}var r;var i;var s;for(var o=0;o<t.length;o++){if(o===0){r=a.getContextByIndex([t[o]]).getObject().Fikrs;i=a.getContextByIndex([t[o]]).getObject().NotaId;s=a.getContextByIndex([t[o]]).getObject().GjahrNota}else{r=r+";"+a.getContextByIndex([t[o]]).getObject().Fikrs;i=i+";"+a.getContextByIndex([t[o]]).getObject().NotaId;s=s+";"+a.getContextByIndex([t[o]]).getObject().GjahrNota}}var g=new sap.ui.model.json.JSONModel;var d="/sap/opu/odata/sap/ZGWVCFI_PAINEL_NEGOCIACAO_SRV/ZET_VCFI_BUSCA_NOTASet(Fikrs='"+r+"',NotaId='"+i+"',GjahrNota='"+s+"')";g.loadData(d,null,false,"GET",false,false,null);var u=g.getData();var c=this;var h=this.getView().getModel();var b=g.oData.d.Texto;var v=b.replace(/&&/g,"\n");var p="";p=new l({title:"Motivo de Reprovação",type:"Message",content:[new sap.m.Label({text:"Notas",labelFor:"submitDialogTextarea"}),new sap.m.TextArea("submitDialogTextarea",{id:"IdTextArea",value:v,width:"150%",editable:true,rows:20,cols:80})],beginButton:new n({type:sap.m.ButtonType.Emphasized,text:"Ok",press:function(){p.close()}.bind(this)}),endButton:new n({text:"Cancelar",press:function(){p.close()}}),afterClose:function(){p.destroy()}});p.open()},NotasBeforeRebindTable:function(e){if(p){e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Belnr",operator:"EQ",value1:p}))}if(m!==""){e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Bukrs",operator:"EQ",value1:m}))}if(S!==""){e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Buzei",operator:"EQ",value1:S}))}e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Gjahr",operator:"EQ",value1:f}));e.getParameter("bindingParams").filters.push(new sap.ui.model.Filter({path:"Knkli",operator:"EQ",value1:B}))},getText:function(e){var e=e},NotasVisu:function(e){p=e.getSource().getBindingContext().getObject().Belnr;m=e.getSource().getBindingContext().getObject().Bukrs;S=e.getSource().getBindingContext().getObject().Buzei;I=e.getSource().getBindingContext().getObject().Fikrs;f=e.getSource().getBindingContext().getObject().Gjahr;B=e.getSource().getBindingContext().getObject().Knkli;this.getRouter().navTo("Notas",{Belnr:p,Bukrs:m,Buzei:S,Fikrs:I,Gjahr:f,Knkli:B})},AnexosVisu:function(e){var t=e.getSource().getText();if(t==="00000"){sap.m.MessageBox.error("Não existe anexo para essa nota!");return}var a=e.getSource().getBindingContext().getObject().NotaId;var r=e.getSource().getBindingContext().getObject().GjahrNota;var i=e.getSource().getBindingContext().getObject().Fikrs;this.getRouter().navTo("Anexos",{Fikrs:i,NotaId:a,GjahrNota:r})},Hist:function(e){var t=this.getView().byId("table").getSelectedIndices();var a=this.getView().byId("table");if(t.length<1){sap.m.MessageBox.error("Nenhum item selecionado");return}if(t.length>1){sap.m.MessageBox.error("Selecionar apenas um item");return}var r=a.getContextByIndex([t[0]]).getObject().Fikrs;var i=a.getContextByIndex([t[0]]).getObject().Belnr;var n=a.getContextByIndex([t[0]]).getObject().Bukrs;var s=a.getContextByIndex([t[0]]).getObject().Gjahr;var o=a.getContextByIndex([t[0]]).getObject().Buzei;this.getRouter().navTo("Items",{Fikrs:r,Belnr:i,Bukrs:n,Gjahr:s,Buzei:o})},Prom:function(e){var t=this.getView().byId("table");if(this.getView().byId("table").getBinding("rows").getLength()<1){sap.m.MessageBox.error("Não é possível navegar, nenhum documento foi carregado");return}var a=t.getContextByIndex(0).getObject().Fikrs;var r=t.getContextByIndex(0).getObject().Kunnr;var i=t.getContextByIndex(0).getObject().Knkli;var n=this.getView().byId("idSel").getSelectedKey();this.getRouter().navTo("Promessas",{Fikrs:a,Kunnr:r,Knkli:i,NivelDet:n})},onRefresh:function(){var e=this.byId("table");e.getBinding("items").refresh()},_showObject:function(e){this.getRouter().navTo("Items",{Cliente:e.getBindingContext().getProperty("Kunnr")})},formatterTestStatus:function(e){var t=sap.ushell.Container.getUser().getFullName();return t},_applySearch:function(e){var t=this.byId("table"),a=this.getModel("worklistView");t.getBinding("items").filter(e,"Application");if(e.length!==0){a.setProperty("/tableNoDataText",this.getResourceBundle().getText("worklistNoDataWithSearchText"))}}})});