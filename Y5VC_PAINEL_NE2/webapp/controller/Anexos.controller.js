sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter"],function(e,t,i){"use strict";var n;var a;var r;return e.extend("Y5VC_PAINEL_NE2.Y5VC_PAINEL_NE2.controller.Anexos",{formatter:i,onInit:function(){var e,i=new t({busy:true,delay:0});this.getRouter().getRoute("Anexos").attachPatternMatched(this._onObjectMatched,this);e=this.getView().getBusyIndicatorDelay();this.setModel(i,"AnexosView");this.getOwnerComponent().getModel().metadataLoaded().then(function(){i.setProperty("/delay",e)})},_onObjectMatched:function(e){n=e.getParameter("arguments").NotaId;a=e.getParameter("arguments").GjahrNota;r=e.getParameter("arguments").Fikrs;var t=new sap.ui.model.Filter("Fikrs",sap.ui.model.FilterOperator.EQ,r);var i=new sap.ui.model.Filter("NotaId",sap.ui.model.FilterOperator.EQ,n);var o=new sap.ui.model.Filter("GjahrNota",sap.ui.model.FilterOperator.EQ,a);var s=this.getView().byId("UploadCollection");s.getBinding("items").filter([t,i,o])},BeforeTableAnexo:function(e){},_bindView:function(e){var t=this.getModel("AnexosView"),i=this.getModel();this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){i.metadataLoaded().then(function(){t.setProperty("/busy",true)})},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=this.getModel("AnexosView"),i=e.getElementBinding();if(!i.getBoundContext()){this.getRouter().getTargets().display("objectNotFound");return}var n=this.getResourceBundle(),a=e.getBindingContext().getObject(),r=a.Belnr,o=a.Cliente;t.setProperty("/busy",false);this.addHistoryEntry({title:this.getResourceBundle().getText("objectTitle")+" - "+o,icon:"sap-icon://enter-more",intent:"#Y5VC_PAINEL_NE2-display&/ZET_VCFI_ANEXOSSet/"+r});t.setProperty("/saveAsTileTitle",n.getText("saveAsTileTitle",[o]));t.setProperty("/shareOnJamTitle",o);t.setProperty("/shareSendEmailSubject",n.getText("shareSendEmailObjectSubject",[r]));t.setProperty("/shareSendEmailMessage",n.getText("shareSendEmailObjectMessage",[o,r,location.href]))}})});