sap.ui.define(["Y5GL_FERI_APRO2/Y5GL_FERI_APRO2/controller/BaseController","sap/ui/model/json/JSONModel","Y5GL_FERI_APRO2/Y5GL_FERI_APRO2/model/formatter","sap/ui/Device","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/ui/core/Fragment","sap/m/Label","sap/m/Button","sap/m/Dialog","sap/m/Text","sap/m/TextArea"],function(e,t,a,i,s,o,r,n,l,d,u,g,c){"use strict";var f,v,V,I,h,b,m,p,_,w,S,A,E,D,C,F,R;return e.extend("Y5GL_FERI_APRO2.Y5GL_FERI_APRO2.controller.DetalheFerias",{formatter:a,onInit:function(){var e=new t({busy:false,delay:0});this.getRouter().getRoute("DetalheFerias").attachPatternMatched(this._onObjectMatched,this);this.setModel(e,"detailView");this.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this));var a=jQuery.sap.getModulePath("Y5GL_FERI_APRO2.Y5GL_FERI_APRO2");var i=a+"/imagens/loading.gif";this.getView().byId("idimg").setSrc(i)},_onObjectMatched:function(e){this.getView().byId("idPage").scrollTo(0,0);this.getView().getModel().refresh(true);A=e.getParameter("arguments").Pernr;E=e.getParameter("arguments").Index;D=e.getParameter("arguments").Endda;C=e.getParameter("arguments").Begda;R=e.getParameter("arguments").Limite;if(A!==""&&a!==""&&w!==""&&m!==""){this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ZET_GLHR_PROGRAMARSet",{Pernr:A,Index:E,Endda:D,Begda:C});this._bindView("/"+e)}.bind(this))}else{sap.m.MessageBox.success("Não foi possivel determinar rota.");return}},_bindView:function(e){var t=this;var a=this.getView().getModel();var i;t.loading(false);this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){t.loading(true)},dataReceived:function(){t.loading(false);t.getView().byId("idPage").scrollTo(0,0)}}})},_onBindingChange:function(e){var t=this.getView(),a=t.getElementBinding();if(!a.getBoundContext()){this.getRouter().getTargets().display("detailObjectNotFound");this.getOwnerComponent().oListSelector.clearMasterListSelection();return}this.getView().byId("IdInicio1").setValueState("None");this.getView().byId("first_diasgozo").setValueState("None");this.getView().byId("IdFim1").setValueState("None");this.getView().byId("IdInicio2").setValueState("None");this.getView().byId("secon_diasgozo").setValueState("None");this.getView().byId("IdFim2").setValueState("None");this.getView().byId("IdInicio3").setValueState("None");this.getView().byId("third_diasgozo").setValueState("None");this.getView().byId("IdFim3").setValueState("None")},onVoltar:function(e){this.getRouter().navTo("object",{Pernr:A})},FormatValue:function(e){if(e==="0"){return""}else{return e}},FormatVisible:function(e){switch(e){case"Aprovado":return true;break;case"Homologado":return true;break;case"Em aberto":return true;break;case"Em aprovação":return true;break;default:return false}},FormatAlterar:function(e){switch(e){case"Aprovado":return true;break;case"Homologado":return true;break;case"Em aprovação":return true;break;default:return false}},FormatAprovar:function(e){switch(e){case"Homologado":return true;break;case"Em aberto":return true;break;case"Em aprovação":return true;break;default:return false}},FormatPDF:function(e){if(e==="Aprovado"||e==="Homologado"){return true}else{return false}},_onMetadataLoaded:function(){var e=this.getView().getBusyIndicatorDelay(),t=this.getModel("detailView");t.setProperty("/delay",0);t.setProperty("/busy",true);t.setProperty("/delay",e)},onCloseDetailPress:function(){this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen",false);this.getOwnerComponent().oListSelector.clearMasterListSelection();this.getRouter().navTo("master")},toggleFullScreen:function(){var e=this.getModel("appView").getProperty("/actionButtonsInfo/midColumn/fullScreen");this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen",!e);if(!e){this.getModel("appView").setProperty("/previousLayout",this.getModel("appView").getProperty("/layout"));this.getModel("appView").setProperty("/layout","MidColumnFullScreen")}else{this.getModel("appView").setProperty("/layout",this.getModel("appView").getProperty("/previousLayout"))}},validaData:function(){var e=this.getView().byId("IdInicio1").getValue();var t=this.getView().byId("first_diasgozo").getValue();if(e===""||t===""){this.getView().byId("IdFim1").setValue()}},somardatafirst:function(){var e=this;var t=this.getView().byId("IdInicio1").getValue();var a=this.getView().byId("first_diasgozo").getValue();var i;if(t===""){this.getView().byId("IdFim1").setValue("");return}if(a===""){a="0"}i=!isNaN(a);if(i===true){if(a>0){var s="";var o="/sap/opu/odata/sap/ZGWGLHR_FERIAS_ESS_SRV/ZET_GLHR_CALC_DAYS(V_DATA='"+t+"',V_DIAS='"+a+"')";var r=new sap.ui.model.json.JSONModel;var n={};n.vdata=this.getView().byId("IdInicio1").getValue();n.vdays=this.getView().byId("first_diasgozo").getValue();r.loadData(o,null,false,"GET",false,false,null);var l=r.oData.d.V_RESULTADO;var d=e.getView().byId("IdFim1");d.setValue(l)}}else{sap.m.MessageBox.error("O valor informado deverá ser um número.",{actions:["OK"],onClose:function(t){e.getView().byId("first_diasgozo").setValue()}})}},somardatasecon:function(){var e=this;var t=this.getView().byId("IdInicio2").getValue();var a=this.getView().byId("secon_diasgozo").getValue();var i;if(t===""){this.getView().byId("IdFim1").setValue("");return}if(a===""){a="0"}i=!isNaN(a);if(i===true){if(a>0){var s="";var o="/sap/opu/odata/sap/ZGWGLHR_FERIAS_ESS_SRV/ZET_GLHR_CALC_DAYS(V_DATA='"+t+"',V_DIAS='"+a+"')";var r=new sap.ui.model.json.JSONModel;var n={};n.vdata2=this.getView().byId("IdInicio2").getValue();n.vdays2=this.getView().byId("secon_diasgozo").getValue();r.loadData(o,null,false,"GET",false,false,null);var l=r.oData.d.V_RESULTADO;var d=e.getView().byId("IdFim2");d.setValue(l)}}else{sap.m.MessageBox.error("O valor informado deverá ser um número.",{actions:["OK"],onClose:function(t){e.getView().byId("secon_diasgozo").setValue()}})}},somardatathird:function(){var e=this;var t=this.getView().byId("IdInicio3").getValue();var a=this.getView().byId("third_diasgozo").getValue();var i;if(t===""){this.getView().byId("IdFim1").setValue("");return}if(a===""){a="0"}i=!isNaN(a);if(i===true){if(a>0){var s="";var o="/sap/opu/odata/sap/ZGWGLHR_FERIAS_ESS_SRV/ZET_GLHR_CALC_DAYS(V_DATA='"+t+"',V_DIAS='"+a+"')";var r=new sap.ui.model.json.JSONModel;var n={};n.vdata=this.getView().byId("IdInicio3").getValue();n.vdays=this.getView().byId("third_diasgozo").getValue();r.loadData(o,null,false,"GET",false,false,null);var l=r.oData.d.V_RESULTADO;var d=e.getView().byId("IdFim3");d.setValue(l)}}else{sap.m.MessageBox.error("O valor informado deverá ser um número.",{actions:["OK"],onClose:function(t){e.getView().byId("third_diasgozo").setValue()}})}},somardata:function(e,t){var a=this;var i=this.getOwnerComponent().getModel("ferias_ess");var s="VDATA eq '"+e+"' and VDIAS eq '"+t+"'";var o="/ZET_GLHR_CALC_DAYS";i.read(o,{urlParameters:{$filter:s},async:false,success:function(e,t){return e.results[0].RESULTADO},error:function(){sap.m.MessageToast.show("Férias não encontradas!")}})},validacaracter:function(e){var t=this.getView().byId("first_diasgozo").getValue();var a=/^[0-9]+$/;if(t.match(a)){if(t.length>2){var i=t.slice(0,2);this.getView().byId("first_diasgozo").setValue(i)}if(t.length<2){this.somardatafirst()}this.somardatafirst()}else{var s=t.slice(0,0);this.getView().byId("first_diasgozo").setValue(s);this.somardatafirst()}},validasecon:function(e){var t=this.getView().byId("secon_diasgozo").getValue();var a=/^[0-9]+$/;if(t.match(a)){if(t.length>2){var i=t.slice(0,2);this.getView().byId("secon_diasgozo").setValue(i)}if(t.length<2){this.somardatasecon()}this.somardatasecon()}else{var s=t.slice(0,0);this.getView().byId("secon_diasgozo").setValue(s);this.somardatasecon()}},validathird:function(e){var t=this.getView().byId("third_diasgozo").getValue();var a=/^[0-9]+$/;if(t.match(a)){if(t.length>2){var i=t.slice(0,2);this.getView().byId("third_diasgozo").setValue(i)}if(t.length<2){this.somardatathird()}this.somardatathird()}else{var s=t.slice(0,0);this.getView().byId("third_diasgozo").setValue(s);this.somardatathird()}},AbreDialogSave:function(){var e=this;if(!e._valueHelpDialog1){e._valueHelpDialog1=sap.ui.xmlfragment("Y5GL_FERI_APRO2.Y5GL_FERI_APRO2.view.dialog",e);e.getView().addDependent(e._valueHelpDialog1)}e._valueHelpDialog1.open()},AbreDialogCancel:function(){var e=this;if(!e._valueHelpDialog2){e._valueHelpDialog2=sap.ui.xmlfragment("Y5GL_FERI_APRO2.Y5GL_FERI_APRO2.view.dialogCancel",e);e.getView().addDependent(e._valueHelpDialog2)}e._valueHelpDialog2.open()},FormatChecked:function(e){if(e==="X"){return true}else{return false}},FormatChecked2:function(e){if(e==="X"){return true}else{return false}},FormatStatus:function(e){if(e==="Status: Disponível"){return"Success"}if(e==="Status: Em programação"){return"Warning"}if(e==="Status: Em aprovação"){return"Warning"}if(e==="Status: Disponível"){return"Success"}if(e==="Em programação"){return"Warning"}if(e==="Status: Homologado"){return"Success"}if(e==="Homologado"){return"Success"}if(e==="Status: Em Aberto"){return"Success"}if(e==="Em Aberto"){return"Success"}if(e==="Status: Aprovado"){return"Success"}if(e==="Aprovado"){return"Success"}if(e==="Status: Em aprovação"){return"Warning"}if(e==="Em aprovação"){return"Warning"}return"Error"},FormatEditable:function(e){switch(e){case"Homologado":return false;break;case"Aprovado":return false;break;case"Em Aberto":return false;break;case"Efetivado":return false;break;case"Em aprovação":return false;break;default:return true}},onAltera1:function(){this.getView().byId("IdInicio1").setEditable(true);this.getView().byId("first_diasgozo").setEditable(true);this.getView().byId("first_13_1").setEditable(true);this.getView().byId("first_abono").setEditable(true);this.getView().byId("Aprova1").setVisible(true)},onAltera2:function(){this.getView().byId("IdInicio2").setEditable(true);this.getView().byId("secon_diasgozo").setEditable(true);this.getView().byId("first_13_2").setEditable(true);this.getView().byId("second_abono").setEditable(true);this.getView().byId("Aprova2").setVisible(true)},onAltera3:function(){this.getView().byId("IdInicio3").setEditable(true);this.getView().byId("third_diasgozo").setEditable(true);this.getView().byId("first_13_3").setEditable(true);this.getView().byId("third_abono").setEditable(true);this.getView().byId("Aprova3").setVisible(true)},onSelect:function(e){var t=this.getView().byId("first_13_1").getSelected();var a=this.getView().byId("first_13_2").getSelected();var i=this.getView().byId("first_13_3").getSelected();var s=this.getView().byId("first_status").getText();var o=this.getView().byId("secon_status").getText();var r=this.getView().byId("third_status").getText();var n=e.getParameters("id").id;var l=n.split("detail--");var d=l[1];var u="A solicitação de 13° salário será possivel apenas uma vez!";if(d==="first_13_1"){if(t===true&&s!=="Efetivado"){if(a===true||i===true){sap.m.MessageBox.error(u);this.getView().byId("first_13_2").setSelected(false);this.getView().byId("first_13_3").setSelected(false);return}}}if(d==="first_13_2"){if(a===true&&s!=="Efetivado"&&o!=="Efetivado"){if(t===true||i===true){sap.m.MessageBox.error(u);this.getView().byId("first_13_1").setSelected(false);this.getView().byId("first_13_3").setSelected(false);return}}}if(d==="first_13_3"){if(i===true&&s!=="Efetivado"&&o!=="Efetivado"&&r!=="Efetivado"){if(t===true||a===true){sap.m.MessageBox.error(u);this.getView().byId("first_13_1").setSelected(false);this.getView().byId("first_13_2").setSelected(false);return}}}},_onAdd:function(){this.getView().byId("IdonAddDoc").setVisible(true);this.getView().byId("IdonEnviar").setVisible(true);this.getView().byId("IdonDoc").setVisible(false);this.getView().byId("IdonVoltar").setVisible(false);this.getView().byId("IdMsg").setVisible(false);this.getView().byId("IdParentesco").setValue();this.getView().byId("IdFavor").setValue();this.getView().byId("IdFanam").setValue();this.getView().byId("IdFgbdt").setValue();this.getView().byId("IdSexo").setValue();this.getView().byId("IdZzestciv").setValue()},onParentClicked:function(e){var t=e.getParameter("selected");var a=this._valueHelpDialog1.getContent()[2];var i=this._valueHelpDialog1.getContent()[3];var s=this._valueHelpDialog1.getContent()[4];if(t===true){a.setSelected(true);i.setSelected(true);s.setSelected(true)}else{a.setSelected(false);i.setSelected(false);s.setSelected(false)}},onParentClickedCancel:function(e){var t=e.getParameter("selected");var a=this._valueHelpDialog2.getContent()[2];var i=this._valueHelpDialog2.getContent()[3];var s=this._valueHelpDialog2.getContent()[4];if(t===true){a.setSelected(true);i.setSelected(true);s.setSelected(true)}else{a.setSelected(false);i.setSelected(false);s.setSelected(false)}},onSelectedCheck_1:function(e){var t=e.getSource().getId();var a=this._valueHelpDialog1.getContent()[0];var i=this._valueHelpDialog1.getContent()[2].getSelected();var s=this._valueHelpDialog1.getContent()[3].getSelected();var o=this._valueHelpDialog1.getContent()[4].getSelected();if(i===true&&s===true&&o===true){a.setSelected(true)}else{a.setSelected(false)}var r=this.getView().byI("IdInicio1").getValue();var n=this.getView().byId("first_diasgozo").getValue();if(r!==""||n!==""){i.setSelected(true)}},onSelectedCheckCancel:function(e){var t=e.getSource().getId();var a=this._valueHelpDialog2.getContent()[0];var i=this._valueHelpDialog2.getContent()[2].getSelected();var s=this._valueHelpDialog2.getContent()[3].getSelected();var o=this._valueHelpDialog2.getContent()[4].getSelected();if(i===true&&s===true&&o===true){a.setSelected(true)}else{a.setSelected(false)}},onConfirmaDialog:function(){var e=this._valueHelpDialog1.getContent()[2].getSelected();var t=this._valueHelpDialog1.getContent()[3].getSelected();var a=this._valueHelpDialog1.getContent()[4].getSelected();if(e!==true&&t!==true&&a!==true){sap.m.MessageBox.error("Deverá ser selecionado ao menos um periodo");return}this.onSave(e,t,a)},onConfirmaDialogCancel:function(){var e=this._valueHelpDialog2.getContent()[2].getSelected();var t=this._valueHelpDialog2.getContent()[3].getSelected();var a=this._valueHelpDialog2.getContent()[4].getSelected();if(e!==true&&t!==true&&a!==true){sap.m.MessageBox.error("Deverá ser selecionado ao menos um periodo");return}this.onCancel(e,t,a)},onCancel:function(e,t,a){var i=this;var n=this.getView().byId("IdIndex").getValue();var l=this.getView().byId("IdPernr").getValue();var d="/ZET_GLHR_ESS_FERIASSet(Index="+n+",Pernr='"+l+"',Acao='C')";var u={};var g=this.getView().byId("first_abono").getSelected();var c=this.getView().byId("first_13_1").getSelected();var f=this.getView().byId("first_13_2").getSelected();var v=this.getView().byId("first_13_3").getSelected();var V=0;var I=this.getView().getModel();e=true;t=true;a=true;if(e===true&&w==="Em aprovação"){u.Inicio1=this.getView().byId("IdInicio1").getValue();u.DiasGozo1=this.getView().byId("first_diasgozo").getValue();u.Fim1=this.getView().byId("IdFim1").getValue();if(g===true){u.Abono1="X";u.DiasAbono1="10"}else{u.Abono1=" "}if(c===true){u.SolParc131="X"}u.Acao1="X"}else{this.getView().byId("IdInicio1").setValueState("None");this.getView().byId("first_diasgozo").setValueState("None");this.getView().byId("IdFim1").setValueState("None")}if(t===true&&S==="Em aprovação"){u.Inicio2=this.getView().byId("IdInicio2").getValue();u.DiasGozo2=this.getView().byId("secon_diasgozo").getValue();u.Fim2=this.getView().byId("IdFim2").getValue();if(f===true){u.SolParc132="X"}u.Acao2="X"}else{this.getView().byId("IdInicio2").setValueState("None");this.getView().byId("secon_diasgozo").setValueState("None");this.getView().byId("IdFim2").setValueState("None")}if(a===true&&y==="Em aprovação"){u.Inicio3=this.getView().byId("IdInicio3").getValue();u.DiasGozo3=this.getView().byId("third_diasgozo").getValue();u.Fim3=this.getView().byId("IdFim3").getValue();if(v===true){u.SolParc133="X"}u.Acao3="X"}else{this.getView().byId("IdInicio3").setValueState("None");this.getView().byId("third_diasgozo").setValueState("None");this.getView().byId("IdFim3").setValueState("None")}if(V===1){sap.m.MessageBox.error("Existem informações não preenchidas.",{actions:["OK"],onClose:function(e){i._valueHelpDialog2.destroy()}});return}var h=new s({title:"Confirmação",type:"Message",content:new r({text:"Deseja cancelar a solicitação de Férias?"}),beginButton:new o({text:"Sim",press:function(){i.loading(true);I.update(d,u,{success:function(e,t){sap.m.MessageBox.success("Suas férias foram canceladas com sucesso.",{actions:["OK"],onClose:function(e){i.getView().getModel().refresh(true)}})},error:function(e){var t=e;t=t.responseText;var a=JSON.parse(t);var s=a.error.message.value;sap.m.MessageBox.error(s,{actions:["OK"],onClose:function(e){i.loading(false)}});return}});h.close()}}),endButton:new o({text:"Não",press:function(){h.close()}}),afterClose:function(){h.destroy();i._valueHelpDialog2.close()}});h.open()},onSave:function(e,t,a){var i=this;var n=this.getView().byId("IdIndex").getValue();var l=this.getView().byId("IdPernr").getValue();var d="/ZET_GLHR_ESS_FERIASSet(Index="+n+",Pernr='"+l+"',Acao='P')";var u={};var g=this.getView().byId("first_abono").getSelected();var c=this.getView().byId("first_13_1").getSelected();var f=this.getView().byId("first_13_2").getSelected();var v=this.getView().byId("first_13_3").getSelected();var V=0;var I=this.getView().getModel();e=true;t=true;a=true;if(e===true){u.Inicio1=this.getView().byId("IdInicio1").getValue();u.DiasGozo1=this.getView().byId("first_diasgozo").getValue();u.Fim1=this.getView().byId("IdFim1").getValue();if(g===true){u.Abono1="X";u.DiasAbono1="10"}else{u.Abono1=" "}if(c===true){u.SolParc131="X"}u.Acao1="X"}else{this.getView().byId("IdInicio1").setValueState("None");this.getView().byId("first_diasgozo").setValueState("None");this.getView().byId("IdFim1").setValueState("None")}if(t===true){u.Inicio2=this.getView().byId("IdInicio2").getValue();u.DiasGozo2=this.getView().byId("secon_diasgozo").getValue();u.Fim2=this.getView().byId("IdFim2").getValue();if(f===true){u.SolParc132="X"}u.Acao2="X"}else{this.getView().byId("IdInicio2").setValueState("None");this.getView().byId("secon_diasgozo").setValueState("None");this.getView().byId("IdFim2").setValueState("None")}if(a===true){u.Inicio3=this.getView().byId("IdInicio3").getValue();u.DiasGozo3=this.getView().byId("third_diasgozo").getValue();u.Fim3=this.getView().byId("IdFim3").getValue();if(v===true){u.SolParc133="X"}u.Acao3="X"}else{this.getView().byId("IdInicio3").setValueState("None");this.getView().byId("third_diasgozo").setValueState("None");this.getView().byId("IdFim3").setValueState("None")}if(V===1){sap.m.MessageBox.error("Existem informações não preenchidas.",{actions:["OK"],onClose:function(e){i._valueHelpDialog1.close()}});return}var h=new s({title:"Confirmação",type:"Message",content:new r({text:"Deseja enviar a solicitação de Férias?"}),beginButton:new o({text:"Sim",press:function(){i.loading(true);I.update(d,u,{success:function(e,t){sap.m.MessageBox.success("Suas férias foram programadas com sucesso.",{actions:["OK"],onClose:function(e){i.getView().getModel().refresh(true)}})},error:function(e){var t=e;t=t.responseText;var a=JSON.parse(t);var s=a.error.message.value;sap.m.MessageBox.error(s,{actions:["OK"],onClose:function(e){i.loading(false)}});return}});h.close()}}),endButton:new o({text:"Não",press:function(){h.close()}}),afterClose:function(){h.destroy();i._valueHelpDialog1.close()}});h.open()},onCancelaDialog:function(){this._valueHelpDialog1.close()},onCancelaDialogCancel:function(){this._valueHelpDialog2.close()},FormatVisibleCheck1:function(){var e=this.getView().byId("first_status").getText();if(e==="Em aprovação"){return true}else{return false}},FormatVisibleCheck2:function(){var e=this.getView().byId("secon_status").getText();if(e==="Em aprovação"){return true}else{return false}},FormatVisibleCheck3:function(){var e=this.getView().byId("third_status").getText();if(e==="Em aprovação"){return true}else{return false}},onAprova:function(e){var t=e.getParameter("id");var i=t.split("DetalheFerias--");var s=i[1];var o="A";var r;switch(s){case"Aprova1":r=1;break;case"Aprova2":r=2;break;case"Aprova3":r=3;break}this.save(a,_,h,r,o)},onReprova:function(e){var t=this;var i=e.getParameter("id");var s=i.split("DetalheFerias--");var o=s[1];var r="R";var n="";n=new u({title:"Motivo da reprovação",type:"Message",content:[new l({text:"Descreva o motivo da reprovação:",labelFor:"submitDialogTextarea"}),new c("submitDialogTextarea",{liveChange:function(e){F=e.getParameter("value");var t=e.getSource().getParent();t.getBeginButton().setEnabled(F.length>0)},width:"100%",placeholder:"Digite aqui."})],beginButton:new d({text:"Enviar",enabled:false,press:function(){var e;switch(o){case"Reprova1":e=1;break;case"Reprova2":e=2;break;case"Reprova3":e=3;break}t.save(a,_,h,e,r);n.close()}}),endButton:new d({text:"Cancelar",press:function(){n.close()}}),afterClose:function(){n.destroy()}});n.open()},save:function(e,t,a,i,n){var l=this;var d=E;var u=A;var g="/ZET_GLHR_ESS_FERIASSet(Index="+d+",Pernr='"+u+"',Acao='"+n+"')";var c={};var f=this.getView().byId("first_abono").getSelected();var v=this.getView().byId("second_abono").getSelected();var V=this.getView().byId("third_abono").getSelected();var I=this.getView().byId("first_13_1").getSelected();var h=this.getView().byId("first_13_2").getSelected();var b=this.getView().byId("first_13_3").getSelected();var m=0;var p=this.getView().getModel();var _;var w;var y;var S=this.getView().byId("first_status").getText();var D=this.getView().byId("secon_status").getText();var C=this.getView().byId("third_status").getText();var R;var x;var M;if(n==="A"){_="Não existem informações a serem aprovadas.";w="Confirma a aprovação de férias ?";y="Aprovação realizada com sucesso!";R="Férias aprovadas com sucesso! \n \n Este empregado possui outros periodos pendentes para aprovação, deseja continuar?"}if(n==="R"){_="Não existem informações a serem reprovadas.";w="Confirma a reprovação de férias ?";y="Reprovação realizada com sucesso!";R="Férias reprovadas com sucesso! \n \n Este empregado possui outros periodos pendentes para aprovação, deseja continuar?"}x="Em aprovação";e=true;t=true;a=true;switch(i){case 1:c.Acao1="X";if(D===x||C===x){y=R;if(D===x){M="Scroll2"}if(C===x){M="Scroll3"}}break;case 2:c.Acao2="X";if(S===x||C===x){y=R;if(S===x){M="Scroll1"}if(C===x){M="Scroll3"}}break;case 3:c.Acao3="X";if(S===x||D===x){y=R;if(S===x){M="Scroll1"}if(D===x){M="Scroll2"}}break}if(e===true){c.StatusTxt1=S;c.Inicio1=this.getView().byId("IdInicio1").getValue();c.DiasGozo1=this.getView().byId("first_diasgozo").getValue();c.Fim1=this.getView().byId("IdFim1").getValue();if(f===true){c.Abono1="X";c.DiasAbono1="10"}else{c.Abono1=" "}if(I===true){c.SolParc131="X"}c.Mensagem=F}else{this.getView().byId("IdInicio1").setValueState("None");this.getView().byId("first_diasgozo").setValueState("None");this.getView().byId("IdFim1").setValueState("None")}if(t===true){c.StatusTxt2=D;c.Inicio2=this.getView().byId("IdInicio2").getValue();c.DiasGozo2=this.getView().byId("secon_diasgozo").getValue();c.Fim2=this.getView().byId("IdFim2").getValue();if(v===true){c.Abono2="X";c.DiasAbono2="10"}else{c.Abono2=" "}if(h===true){c.SolParc132="X"}c.Mensagem=F}else{this.getView().byId("IdInicio2").setValueState("None");this.getView().byId("secon_diasgozo").setValueState("None");this.getView().byId("IdFim2").setValueState("None")}if(a===true){c.StatusTxt2=C;c.Inicio3=this.getView().byId("IdInicio3").getValue();c.DiasGozo3=this.getView().byId("third_diasgozo").getValue();c.Fim3=this.getView().byId("IdFim3").getValue();if(V===true){c.Abono3="X";c.DiasAbono3="10"}else{c.Abono3=" "}if(b===true){c.SolParc133="X"}c.Mensagem=F}else{this.getView().byId("IdInicio3").setValueState("None");this.getView().byId("third_diasgozo").setValueState("None");this.getView().byId("IdFim3").setValueState("None")}if(m===1){sap.m.MessageBox.error("Existem informações não preenchidas.",{actions:["OK"],onClose:function(e){}});return}var P=new s({title:"Confirmação",type:"Message",content:new r({text:w}),beginButton:new o({text:"Sim",press:function(){l.loading(true);p.update(g,c,{success:function(e,t){if(y===R){sap.m.MessageBox.warning(y,{actions:["Sim",sap.m.MessageBox.Action.CLOSE],onClose:function(e){l.getView().getModel().refresh(true)}})}else{sap.m.MessageBox.success(y,{actions:["OK"],onClose:function(e){l.getView().getModel().refresh(true)}})}},error:function(e){var t=e;t=t.responseText;var a=JSON.parse(t);var i=a.error.message.value;sap.m.MessageBox.error(i,{actions:["OK"],onClose:function(e){l.loading(false)}});return}});P.close()}}),endButton:new o({text:"Não",press:function(){P.close()}}),afterClose:function(){P.destroy()}});P.open()},onDownload:function(){var e="0";var t="0";var a="99.9999";var i="0";var s="H";var o="0";var r=this.getView().byId("IdInicio1").getValue();while(r.indexOf("-")!==-1){r=r.replace("-","")}var n="/sap/opu/odata/sap/ZGWGLRH_MEU_CADASTRO_SRV/ZET_GLHR_UPFILESet('"+A+"$"+e+"$"+t+"$"+a+"$"+i+"$"+s+"$"+o+"$"+r+"')/$value";var l=document.createElement("a");l.href=n;l.target="_blank";l.style.display="none";document.body.appendChild(l);l.click();document.body.removeChild(l)},onDownload2:function(){var e="0";var t="0";var a="99.9999";var i="0";var s="H";var o="0";var r=this.getView().byId("IdInicio2").getValue();while(r.indexOf("-")!==-1){r=r.replace("-","")}var n="/sap/opu/odata/sap/ZGWGLRH_MEU_CADASTRO_SRV/ZET_GLHR_UPFILESet('"+A+"$"+e+"$"+t+"$"+a+"$"+i+"$"+s+"$"+o+"$"+r+"')/$value";var l=document.createElement("a");l.href=n;l.target="_blank";l.style.display="none";document.body.appendChild(l);l.click();document.body.removeChild(l)},onDownload3:function(){var e="0";var t="0";var a="99.9999";var i="0";var s="H";var o="0";var r=this.getView().byId("IdInicio3").getValue();while(r.indexOf("-")!==-1){r=r.replace("-","")}var n="/sap/opu/odata/sap/ZGWGLRH_MEU_CADASTRO_SRV/ZET_GLHR_UPFILESet('"+A+"$"+e+"$"+t+"$"+a+"$"+i+"$"+s+"$"+o+"$"+r+"')/$value";var l=document.createElement("a");l.href=n;l.target="_blank";l.style.display="none";document.body.appendChild(l);l.click();document.body.removeChild(l)},formatterIcon:function(e){var t=jQuery.sap.getModulePath("Y5GL_FERI_APRO2.Y5GL_FERI_APRO2");var a=t+"/Icones/";var i;i=a+"FERIAS_DET.png";return i}})});