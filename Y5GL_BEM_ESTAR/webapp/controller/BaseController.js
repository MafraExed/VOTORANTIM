sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/m/Label","sap/m/TextArea","sap/m/ButtonType"],function(e,t,o,a,r,s,i){"use strict";return e.extend("Y5GL_BEM_ESTAR.Y5GL_BEM_ESTAR.controller.BaseController",{loading:function(e){if(e===false){this.getView().byId("idGif").addStyleClass("LoadingFalse")}else{this.getView().byId("idGif").removeStyleClass("LoadingFalse")}},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},adicionarponto:function(e){var t;var o;var a;var r;e+="";t=e.split(".");o=t[0];a=t.length>1?"."+t[1]:"";var s=/(\d+)(\d{3})/;while(s.test(o)){o=o.replace(s,"$1"+"."+"$2")}r=o+a;r=r.trim();return r},adicionarpontoFloat:function(e){var t;var o;var a;var r;e+="";t=e.split(".");o=t[0];a=t.length>1?"."+t[1]:"";var s=/(\d+)(\d{3})/;while(s.test(o)){o=o.replace(s,"$1"+"."+"$2")}r=o+a;return r},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},onShareEmailPress:function(){var e=this.getModel("objectView")||this.getModel("worklistView");sap.m.URLHelper.triggerEmail(null,e.getProperty("/shareSendEmailSubject"),e.getProperty("/shareSendEmailMessage"))},Aprova:function(){var e=this;var r=this.getView().byId("idChamado").getValue();var s="A";var i="/ZET_GLHR_EC_PROCESSARSet(Chamado='"+r+"')";var n=this.getView().getModel();var l={};l.Tipo=s;var u=new t({title:"Confirmação",type:"Message",content:new a({text:"Confirma a efetivação da solicitação?"}),beginButton:new o({text:"Sim",press:function(){n.update(i,l,{success:function(t,o){sap.m.MessageBox.success("Solicitação efetivada",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(t){e.getView().getModel().refresh(true);e.getRouter().navTo("worklist")}})},error:function(e){var t=e;t=t.responseText;var o=JSON.parse(t);var a=o.error.message.value;sap.m.MessageBox.error(a,{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){}});return}});u.close()}}),endButton:new o({text:"Não",press:function(){u.close()}}),afterClose:function(){u.destroy()}});u.open()},Reprova:function(){var e=this;var a=this.getView().getModel();var n=this.getView().byId("idChamado").getValue();var l="R";var u="/ZET_GLHR_EC_PROCESSARSet(Chamado='"+n+"')";var c={};c.Tipo=l;var g;var d="";d=new t({title:"Razón de la desaprobación",type:"Message",content:[new r({text:"Describe el motivo de la desaprobación.",labelFor:"submitDialogTextarea"}),new s("submitDialogTextarea",{liveChange:function(e){g=e.getParameter("value");c.Motivo=g},width:"100%",rows:10,placeholder:"Digite aqui."})],beginButton:new o({type:i.Emphasized,text:"Ok",press:function(){if(c.Motivo===undefined){sap.m.MessageBox.error("Razón no llena");return}else{d.close();a.update(u,c,{success:function(t,o){sap.m.MessageBox.success("Solicitud rechazada",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(t){e.getView().getModel().refresh(true);e.getRouter().navTo("worklist")}})},error:function(t){var o=t;o=o.responseText;var a=JSON.parse(o);var r=a.error.message.value;sap.m.MessageBox.error(r,{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(t){e.getRouter().navTo("worklist")}});return}})}}.bind(this)}),endButton:new o({text:"Cancelar",press:function(){d.close()}}),afterClose:function(){d.destroy()}});d.open()},formatValueState:function(e){if(e==="X"){return"Error"}else{return"None"}},buscaImagem:function(){var e=jQuery.sap.getModulePath("Y5GL_EC_BENEF4.Y5GL_EC_BENEF4");var t=e+"/imagens/loading.gif";var o=t;this.getView().byId("idimg").setSrc(o);this.getView().byId("idimg").addStyleClass("footer_img");this.getView().byId("idimg").removeStyleClass("footer_img")}})});