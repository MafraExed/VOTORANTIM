sap.ui.define(["Y5GL_EC_BENEF4/Y5GL_EC_BENEF4/controller/BaseController","sap/ui/Device","Y5GL_EC_BENEF4/Y5GL_EC_BENEF4/model/formatter","sap/m/Button","sap/m/Dialog","sap/m/Text","sap/m/Label","sap/m/RadioButton","sap/ui/model/json/JSONModel"],function(e,t,i,a,s,d,r,l,o){"use strict";var n;var g;var b;var I;var V;var u;var y;var h;return e.extend("Y5GL_EC_BENEF4.Y5GL_EC_BENEF4.controller.DepententeDetail",{formatter:i,onInit:function(){this.getRouter().getRoute("DependentesAdd").attachPatternMatched(this._onAdd,this);this.buscaImagem()},onChangeCPF:function(){var e=this.getView().byId("idCpf").getValue();while(e.indexOf(".")!=-1){e=e.replace(".","")}while(e.indexOf("-")!=-1){e=e.replace("-","")}var t,i,a,s,d,r;var l;r=1;if(e.length<11){l=1}if(l!==1){for(s=0;s<e.length-1;s++)if(e.charAt(s)!=e.charAt(s+1)){r=0;break}if(!r){t=e.substring(0,9);i=e.substring(9);a=0;for(s=10;s>1;s--){a+=t.charAt(10-s)*s}d=a%11<2?0:11-a%11;if(d!=i.charAt(0)){l=1}t=e.substring(0,10);a=0;for(s=11;s>1;s--)a+=t.charAt(11-s)*s;d=a%11<2?0:11-a%11;if(d!=i.charAt(1)){l=1}}else{l=1}}else{l=1}if(l===1){sap.m.MessageBox.error("CPF inválido");this.getView().byId("idCpf").setValueState("Error")}else{this.getView().byId("idCpf").setValueState("Success")}},onVoltar:function(){var e="BENEFICIOS_DETAIL";var i="PLANO_MEDICO";var a="PLAN DE SALUD";var s=!t.system.phone;this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getRouter().navTo(e,{Zparam:i,Zdesc:a},s)},formatVisibleEdit:function(e){if(e==="Em ResoluÃ§Ã£o"){return false}else{return true}},formatVisibleUpload:function(e){if(e==="Em ResoluÃ§Ã£o"){return true}else{return false}},_onAdd:function(e){this.getView().getModel().refresh(true);var t=e.getParameter("arguments").Pernr;var i=e.getParameter("arguments").Subty;var a="N";h=e.getParameter("arguments").Objps;var s=e.getParameter("arguments").Favor;var d=e.getParameter("arguments").Icnum;var r;this.getView().byId("IdParentesco").setEditable(true);this.getView().byId("IdFavor").setEditable(true);this.getView().byId("IdFanam").setEditable(true);this.getView().byId("IdFgbdt").setEditable(true);this.getView().byId("IdSexo").setEditable(true);this.getView().byId("IdZzestciv").setEditable(true);this.getView().byId("IdIR").setEditable(true);this.getView().byId("idCpf").setEditable(true);this.getView().byId("IdSalvarDetailDep").setVisible(true);this.getView().byId("IdEditDetailDep").setVisible(false);this.getView().byId("IdCancelarDetailDep").setVisible(false);this.getView().byId("IdPlano").setEditable(true);this.getView().byId("IdLocNascimento").setEditable(true);this.getView().byId("IdNacionaliade").setEditable(true);this.getView().byId("idIdentificacion").setEditable(true);this.getView().byId("idVia").setEditable(true);this.getView().byId("idNombreVia").setEditable(true);this.getView().byId("idNumeroVia").setEditable(true);this.getView().byId("idInterior").setEditable(true);this.getView().byId("idTpZona").setEditable(true);this.getView().byId("idNrodep").setEditable(true);this.getView().byId("idZzNomzon").setEditable(true);this.getView().byId("idZzRefer").setEditable(true);this.getView().byId("idDistrito").setEditable(true);this.getView().byId("idUbigeo").setEditable(false);this.getView().byId("idManzana").setEditable(true);this.getView().byId("idLote").setEditable(true);this.getView().byId("idKilometro").setEditable(true);this.getView().byId("idBloque").setEditable(true);this.getView().byId("idEtapa").setEditable(true);this.getView().byId("idDepartamento").setEditable(true);this.getView().byId("idProvincia").setEditable(true);this.getView().byId("IdPaisNasc").setEditable(true);this.getView().byId("IdParentesco").setValueState("None");this.getView().byId("IdFavor").setValueState("None");this.getView().byId("IdFanam").setValueState("None");this.getView().byId("IdFgbdt").setValueState("None");this.getView().byId("IdFgbdt").setValueState("None");this.getView().byId("IdSexo").setValueState("None");this.getView().byId("IdZzestciv").setValueState("None");this.getView().byId("IdPlano").setValueState("None");this.getView().byId("IdIR").setValueState("None");this.getView().byId("idCpf").setValueState("None");this.getView().byId("IdEditDetailDep").setVisible(false);this.getView().byId("IdCancelarDetailDep").setVisible(false);this.getView().byId("iddelete").setVisible(false);this.getView().byId("idTextEditar").setVisible(false);this.getView().byId("idTextExcluir").setVisible(false);this.getView().byId("idTextIncluir").setVisible(false);this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getModel().metadataLoaded().then(function(){r=this.getModel().createKey("ZET_GLRH_DEPENDENTESSet",{Pernr:t,Subty:i,Objps:h,Tipo:a,Favor:s,Icnum:d,Chamado:"0"});this._bindView("/"+r)}.bind(this))},onEdit:function(){n=this.getView().byId("IdParentesco").getSelectedKey();g=this.getView().byId("IdFavor").getValue();b=this.getView().byId("IdFanam").getValue();I=this.getView().byId("IdFgbdt").getValue();V=this.getView().byId("IdSexo").getValue();u=this.getView().byId("IdZzestciv").getSelectedKey();y=this.getView().byId("IdIR").getSelectedKey();if(y==="S"){y="SIM"}else{y="Não"}this.getView().byId("UploadCollection").setUploadButtonInvisible(false);this.getView().byId("IdEditDetailDep").setVisible(false);this.getView().byId("IdSalvarDetailDep").setVisible(true);this.getView().byId("IdCancelarDetailDep").setVisible(true);this.getView().byId("IdParentesco").setEditable(false);this.getView().byId("IdFavor").setEditable(true);this.getView().byId("IdFanam").setEditable(true);this.getView().byId("IdFgbdt").setEditable(true);this.getView().byId("IdSexo").setEditable(true);this.getView().byId("IdZzestciv").setEditable(true);this.getView().byId("IdIR").setEditable(true);this.getView().byId("idCpf").setEditable(true);this.getView().byId("IdPlano").setEditable(true);this.getView().byId("IdLocNascimento").setEditable(true);this.getView().byId("IdNacionaliade").setEditable(true);this.getView().byId("IdPaisNasc").setEditable(true);this.getView().byId("idIdentificacion").setEditable(true);this.getView().byId("idVia").setEditable(true);this.getView().byId("idNombreVia").setEditable(true);this.getView().byId("idNumeroVia").setEditable(true);this.getView().byId("idInterior").setEditable(true);this.getView().byId("idTpZona").setEditable(true);this.getView().byId("idNrodep").setEditable(true);this.getView().byId("idZzNomzon").setEditable(true);this.getView().byId("idZzRefer").setEditable(true);this.getView().byId("idDistrito").setEditable(false);this.getView().byId("idUbigeo").setEditable(false);this.getView().byId("idManzana").setEditable(true);this.getView().byId("idLote").setEditable(true);this.getView().byId("idKilometro").setEditable(true);this.getView().byId("idBloque").setEditable(true);this.getView().byId("idEtapa").setEditable(true);this.getView().byId("idDepartamento").setEditable(true);this.getView().byId("idProvincia").setEditable(false);this.getView().byId("IdFgbna").setEditable(true);this.getView().byId("IdZzStudy").setEditable(true);this.getView().byId("idTextEditar").setVisible(false);this.getView().byId("idTextExcluir").setVisible(false);this.getView().byId("idTextIncluir").setVisible(false)},onCancel:function(){this.getView().byId("IdCancelarDetailDep").setVisible(false);this.getView().byId("IdEditDetailDep").setVisible(true);this.getView().byId("IdSalvarDetailDep").setVisible(false);this.getView().byId("UploadCollection").setUploadButtonInvisible(true);this.getView().byId("IdParentesco").setEditable(false);this.getView().byId("IdFavor").setEditable(false);this.getView().byId("IdFanam").setEditable(false);this.getView().byId("IdFgbdt").setEditable(false);this.getView().byId("IdSexo").setEditable(false);this.getView().byId("IdZzestciv").setEditable(false);this.getView().byId("IdIR").setEditable(false);this.getView().byId("idCpf").setEditable(false);this.getView().byId("IdPlano").setEditable(false);this.getView().byId("IdLocNascimento").setEditable(false);this.getView().byId("IdNacionaliade").setEditable(false);this.getView().byId("IdPaisNasc").setEditable(false);this.getView().byId("idIdentificacion").setEditable(false);this.getView().byId("idVia").setEditable(false);this.getView().byId("idNombreVia").setEditable(false);this.getView().byId("idNumeroVia").setEditable(false);this.getView().byId("idInterior").setEditable(false);this.getView().byId("idTpZona").setEditable(false);this.getView().byId("idNrodep").setEditable(false);this.getView().byId("idZzNomzon").setEditable(false);this.getView().byId("idZzRefer").setEditable(false);this.getView().byId("idDistrito").setEditable(false);this.getView().byId("idUbigeo").setEditable(false);this.getView().byId("idManzana").setEditable(false);this.getView().byId("idLote").setEditable(false);this.getView().byId("idKilometro").setEditable(false);this.getView().byId("idBloque").setEditable(false);this.getView().byId("idEtapa").setEditable(false);this.getView().byId("idDepartamento").setEditable(false);this.getView().byId("idProvincia").setEditable(false);this.getView().byId("IdFgbna").setEditable(false);this.getView().byId("IdZzStudy").setEditable(false);this.getView().byId("IdParentesco").setSelectedKey(n);this.getView().byId("IdFavor").setValue(g);this.getView().byId("IdFanam").setValue(b);this.getView().byId("IdFgbdt").setValue(I);this.getView().byId("IdSexo").setValue(V);this.getView().byId("IdZzestciv").setSelectedKey(u);this.getView().byId("IdIR").setValue(y);this.getView().byId("idTextEditar").setVisible(false);this.getView().byId("idTextExcluir").setVisible(false);this.getView().byId("idTextIncluir").setVisible(false)},onchangeParentesco:function(){var e=this.getView().byId("IdParentesco").getSelectedKey();if(e==="11"||e==="12"){this.getView().byId("idformplano").setVisible(false)}else{this.getView().byId("idformplano").setVisible(true)}},_onObjectMatched:function(e){var t=e.getParameter("arguments").Tipo;var i=e.getParameter("arguments").Pernr;var a=e.getParameter("arguments").Subty;var s="V";h=e.getParameter("arguments").Objps;var d=e.getParameter("arguments").Favor;var r=e.getParameter("arguments").Icnum;this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ZET_GLRH_DEPENDENTESSet",{Icnum:r,Pernr:i,Subty:a,Objps:h,Tipo:s,Favor:d,Chamado:"0"});this._bindView("/"+e)}.bind(this));this.getView().byId("IdParentesco").setEditable(false);this.getView().byId("IdFavor").setEditable(false);this.getView().byId("IdFanam").setEditable(false);this.getView().byId("IdFgbdt").setEditable(false);this.getView().byId("IdSexo").setEditable(false);this.getView().byId("IdZzestciv").setEditable(false);this.getView().byId("IdIR").setEditable(false);this.getView().byId("idCpf").setEditable(false);this.getView().byId("IdPlano").setEditable(false);this.getView().byId("IdLocNascimento").setEditable(false);this.getView().byId("IdNacionaliade").setEditable(false);this.getView().byId("idIdentificacion").setEditable(false);this.getView().byId("idVia").setEditable(false);this.getView().byId("idNombreVia").setEditable(false);this.getView().byId("idNumeroVia").setEditable(false);this.getView().byId("idInterior").setEditable(false);this.getView().byId("idTpZona").setEditable(false);this.getView().byId("idNrodep").setEditable(false);this.getView().byId("idZzNomzon").setEditable(false);this.getView().byId("idZzRefer").setEditable(false);this.getView().byId("idDistrito").setEditable(false);this.getView().byId("idUbigeo").setEditable(false);this.getView().byId("idManzana").setEditable(false);this.getView().byId("idLote").setEditable(false);this.getView().byId("idKilometro").setEditable(false);this.getView().byId("idBloque").setEditable(false);this.getView().byId("idEtapa").setEditable(false);this.getView().byId("idDepartamento").setEditable(false);this.getView().byId("idProvincia").setEditable(false);this.getView().byId("IdFgbna").setEditable(false);this.getView().byId("IdZzStudy").setEditable(false);this.getView().byId("IdPaisNasc").setEditable(false);if(t==="V"){this.getView().byId("IdSalvarDetailDep").setVisible(false);this.getView().byId("IdEditDetailDep").setVisible(true);this.getView().byId("IdCancelarDetailDep").setVisible(false);this.getView().byId("iddelete").setVisible(false);this.getView().byId("UploadCollection").setUploadButtonInvisible(true);this.getView().byId("idTextEditar").setVisible(false);this.getView().byId("idTextExcluir").setVisible(false);this.getView().byId("idTextIncluir").setVisible(false)}if(t==="E"){this.getView().byId("IdSalvarDetailDep").setVisible(false);this.getView().byId("IdEditDetailDep").setVisible(false);this.getView().byId("IdCancelarDetailDep").setVisible(false);this.getView().byId("iddelete").setVisible(true);this.getView().byId("UploadCollection").setUploadButtonInvisible(false);this.getView().byId("idTextEditar").setVisible(false);this.getView().byId("idTextExcluir").setVisible(false);this.getView().byId("idTextIncluir").setVisible(false)}},_bindView:function(e){var t=this;t.loading(false);var i=this.getView().getModel();i.setSizeLimit(1e3);this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){t.loading(true)},dataReceived:function(){t.loading(false)}}})},_onBindingChange:function(){var e=this.getView(),t=e.getElementBinding();if(!t.getBoundContext()){this.getRouter().getTargets().display("detailObjectNotFound");this.getOwnerComponent().oListSelector.clearMasterListSelection();return}this.getView().byId("IdObjps").setValue(h);this.filtraProvinicia();this.filtraDistrito()},filtraProvinicia:function(){var e=this.getView().byId("idDepartamento").getSelectedKey();var t=this.getView().byId("idProvincia");var i=new sap.ui.model.Filter("Regio",sap.ui.model.FilterOperator.EQ,e);t.getBinding("items").filter([i])},filtraDistrito:function(){var e=this.getView().byId("idDepartamento").getSelectedKey();var t=this.getView().byId("idProvincia").getSelectedKey();var i=new sap.ui.model.Filter("Regio",sap.ui.model.FilterOperator.EQ,e);var a=new sap.ui.model.Filter("Counc",sap.ui.model.FilterOperator.EQ,t);var s=this.getView().byId("idDistrito");s.getBinding("items").filter([i,a])},onExcluir:function(){var e=this;var t=this.getView().getModel();var i=this.getView().byId("IdPernr").getValue();var r=this.getView().byId("IdParentesco").getSelectedKey();var l=this.getView().byId("IdObjps").getValue();var o=this.getView().byId("IdFavor").getValue();var n=this.getView().byId("idCpf").getValue();var g="/ZET_GLRH_DEPENDENTESSet(Pernr='"+i+"',Subty='"+r+"',Objps='"+l+"',Favor='"+o+"',Tipo='E',Icnum='"+n+"',Chamado='0')";var b={};b.Parentesco=this.getView().byId("IdParentesco").getSelectedKey();b.Favor=this.getView().byId("IdFavor").getValue();b.Fanam=this.getView().byId("IdFanam").getValue();b.Fgbdt=this.getView().byId("IdFgbdt").getValue();b.Sexo=this.getView().byId("IdSexo").getSelectedKey();b.Zzestciv=this.getView().byId("IdZzestciv").getSelectedKey();b.Irflg=this.getView().byId("IdIR").getSelectedKey();b.Operation="Exclusão";if(b.Irflg==="S"){b.Irflg="X"}else{b.Irflg=""}b.Icnum=this.getView().byId("idCpf").getValue();b.Zplanosaude=this.getView().byId("IdPlano").getSelectedKey();if(b.Zplanosaude==="S"){b.Zplanosaude="X"}else{b.Zplanosaude=" "}var I=new s({title:"Confirmación",type:"Message",content:new d({text:"Después de la confirmación, no será posible cambiar el archivo adjunto hasta que finalice el proceso, ¿desea continuar?"}),beginButton:new a({text:"Sí",press:function(){t.update(g,b,{success:function(t,i){sap.m.MessageBox.success("Su eliminación ha comenzado y continuará procesándose. Espere comentarios o siga la aplicación.",{actions:["OK"],onClose:function(t){e.getView().getModel().refresh(true);e.getRouter().navTo("DEPENDENTES")}})},error:function(t){var i=t;i=i.responseText;var a=JSON.parse(i);var s=a.error.message.value;sap.m.MessageBox.error(s);e.getView().getModel().refresh(true);return}});I.close()}}),endButton:new a({text:"No",press:function(){I.close()}}),afterClose:function(){I.destroy()}});I.open()},onChange:function(e){var t=e.getSource();var i=this.getView().getModel();i.refreshSecurityToken();var a=i.oHeaders;var s=a["x-csrf-token"];var d=new sap.m.UploadCollectionParameter({name:"x-csrf-token",value:s});t.addHeaderParameter(d)},onBeforeUploadStarts:function(e){var t="0";var i="0021";var a=this.getView().byId("IdParentesco").getSelectedKey();var s=this.getView().byId("IdObjps").getValue();if(s===""){s="0"}var d=this.getView().byId("IdParentesco").getSelectedKey();var r=this.getView().byId("IdFavor").getValue();var l=this.getView().byId("idCpf").getValue();if(d===""){sap.m.MessageBox.error("Selecione o Grau de Parentesco.");return}if(t!==""&&a!==""&&s!==""){var o=t+"$"+i+"$"+a+"$"+s+"$"+e.getParameter("fileName")+"$"+r+"$"+l;var n=new sap.m.UploadCollectionParameter({name:"slug",value:encodeURIComponent(o)});e.getParameters().addHeaderParameter(n)}else{sap.m.MessageBox.error("Não foi possivel fazer upload do arquivo.")}},onuploadComplete:function(e){var t="0";var i="0021";var a=this.getView().byId("IdParentesco").getSelectedKey();var s="U";var d=this.getView().byId("IdFavor").getValue();var r=this.getView().byId("idCpf").getValue();if(t!==""&&a!==""){this.getView().byId("IdParentesco").setEditable(false);var l=new sap.ui.model.Filter("Pernr",sap.ui.model.FilterOperator.EQ,t);var o=new sap.ui.model.Filter("Infty",sap.ui.model.FilterOperator.EQ,i);var n=new sap.ui.model.Filter("Subty",sap.ui.model.FilterOperator.EQ,a);var g=new sap.ui.model.Filter("Tipo",sap.ui.model.FilterOperator.EQ,s);var b=new sap.ui.model.Filter("Favor",sap.ui.model.FilterOperator.EQ,d);var I=new sap.ui.model.Filter("Icnum",sap.ui.model.FilterOperator.EQ,r);var V=this.getView().byId("UploadCollection");V.getBinding("items").filter([l,o,n,g,b,I])}},onmodelListContextChange:function(e){var t="0";var i="0021";var a=this.getView().byId("IdParentesco").getSelectedKey();var s="U";var d=this.getView().byId("IdFavor").getValue();var r=this.getView().byId("idCpf").getValue();if(t!==""||a!==""){var l=new sap.ui.model.Filter("Pernr",sap.ui.model.FilterOperator.EQ,t);var o=new sap.ui.model.Filter("Infty",sap.ui.model.FilterOperator.EQ,i);var n=new sap.ui.model.Filter("Subty",sap.ui.model.FilterOperator.EQ,a);var g=new sap.ui.model.Filter("Tipo",sap.ui.model.FilterOperator.EQ,s);var b=new sap.ui.model.Filter("Favor",sap.ui.model.FilterOperator.EQ,d);var I=new sap.ui.model.Filter("Icnum",sap.ui.model.FilterOperator.EQ,r);var V=this.getView().byId("UploadCollection");V.getBinding("items").filter([l,o,n,g,b,I])}},onSave:function(){var e=this;var t=this.getView().getModel();var i=this.getView().byId("IdPernr").getValue();var r=this.getView().byId("IdParentesco").getSelectedKey();var l=this.getView().byId("IdObjps").getValue();var o=this.getView().byId("IdFavor").getValue();var n=this.getView().byId("idCpf").getValue();var g="/ZET_GLRH_DEPENDENTESSet(Pernr='"+i+"',Subty='"+r+"',Objps='"+l+"',Favor='"+o+"',Tipo='G',Icnum='"+n+"',Chamado='0')";var b={};b.Parentesco=this.getView().byId("IdParentesco").getSelectedKey();if(b.Parentesco===""){this.getView().byId("IdParentesco").setValueState("Error");sap.m.MessageBox.error("Selecione o Grau de Parentesco.");return}else{this.getView().byId("IdParentesco").setValueState("Success")}b.Favor=this.getView().byId("IdFavor").getValue();if(b.Favor===""){this.getView().byId("IdFavor").setValueState("Error");sap.m.MessageBox.error("Preencher o Nome.");return}else{this.getView().byId("IdFavor").setValueState("Success")}b.Fanam=this.getView().byId("IdFanam").getValue();if(b.Fanam===""){this.getView().byId("IdFanam").setValueState("Error");sap.m.MessageBox.error("Preencher o sobrenome.");return}else{this.getView().byId("IdFanam").setValueState("Success")}b.Fgbdt=this.getView().byId("IdFgbdt").getValue();if(b.Fgbdt===""){this.getView().byId("IdFgbdt").setValueState("Error");sap.m.MessageBox.error("Selecione data de nascimento.");return}else{this.getView().byId("IdFgbdt").setValueState("Success")}b.Sexo=this.getView().byId("IdSexo").getSelectedKey();if(b.Sexo===" "){this.getView().byId("IdSexo").setValueState("Error");sap.m.MessageBox.error("Selecione o sexo.");return}else{this.getView().byId("IdSexo").setValueState("Success")}b.Zzestciv=this.getView().byId("IdZzestciv").getSelectedKey();if(b.Zzestciv===" "){this.getView().byId("IdZzestciv").setValueState("Error");sap.m.MessageBox.error("Selecione o Estado Civil.");return}else{this.getView().byId("IdZzestciv").setValueState("Success")}b.Irflg=this.getView().byId("IdIR").getSelectedKey();if(b.Irflg===" "){this.getView().byId("IdIR").setValueState("Error");sap.m.MessageBox.error("Selecione se é dependente de IR.");return}else{if(b.Irflg==="S"){b.Irflg="X"}else{b.Irflg=""}this.getView().byId("IdIR").setValueState("Success")}b.Icnum=this.getView().byId("idCpf").getValue();b.Zplanosaude=this.getView().byId("IdPlano").getSelectedKey();if(b.Zplanosaude===""){this.getView().byId("IdPlano").setValueState("Error");sap.m.MessageBox.error("Informe se o dependente será incluido no plano de saúde.");return}else{if(b.Zplanosaude==="S"){b.Zplanosaude="X"}else{b.Zplanosaude=" "}this.getView().byId("IdPlano").setValueState("Success")}if(r==="11"||r==="12"){b.Zplanosaude="N"}b.Mothe=this.getView().byId("idNomedaMae").getValue();b.Fgbld=this.getView().byId("IdPaisNasc").getSelectedKey();b.Fanat=this.getView().byId("IdNacionaliade").getSelectedKey();b.ZzTpvia=this.getView().byId("idVia").getSelectedKey();b.ZzTxvia=this.getView().byId("idNombreVia").getValue();b.ZzNrvia=this.getView().byId("idNumeroVia").getValue();b.ZzNrint=this.getView().byId("idInterior").getValue();b.ZzTpzon=this.getView().byId("idTpZona").getSelectedKey();b.ZzNrodep=this.getView().byId("idNrodep").getValue();b.ZzNomzon=this.getView().byId("idZzNomzon").getValue();b.ZzRefer=this.getView().byId("idZzRefer").getValue();b.ZzCityc=this.getView().byId("idDistrito").getSelectedKey();b.ZzUbigeo=this.getView().byId("idUbigeo").getValue();b.ZzManza=this.getView().byId("idManzana").getValue();b.ZzLote=this.getView().byId("idLote").getValue();b.ZzKilom=this.getView().byId("idKilometro").getValue();b.ZzBlock=this.getView().byId("idBloque").getValue();b.ZzEtapa=this.getView().byId("idEtapa").getValue();b.ZzRegio=this.getView().byId("idDepartamento").getSelectedKey();b.ZzCounc=this.getView().byId("idProvincia").getSelectedKey();b.ZzStudy=this.getView().byId("IdZzStudy").getSelectedKey();if(b.ZzStudy==="S"){b.ZzStudy=true}else{b.ZzStudy=false}b.Fgbna=this.getView().byId("IdFgbna").getValue();if(b.Fgbna===""){this.getView().byId("IdFgbna").setValueState("Error");sap.m.MessageBox.error("Apelido de solteiro no llenado");return}b.ZzIctyp=this.getView().byId("idIdentificacion").getSelectedKey();if(b.ZzIctyp===""){this.getView().byId("idIdentificacion").setValueState("Error");sap.m.MessageBox.error("Tipo de documento no llenado");return}b.ZzIcnum=this.getView().byId("idZzIcnum").getValue();if(b.ZzIcnum===""){this.getView().byId("idZzIcnum").setValueState("Error");sap.m.MessageBox.error("Numero de documento no llenado");return}b.Fgbot=this.getView().byId("IdLocNascimento").getValue();var I=new s({title:"Confirmación",type:"Message",content:new d({text:"Después de la confirmación, no será posible cambiar el archivo adjunto hasta que se complete el proceso. ¿Quieres continuar?"}),beginButton:new a({text:"Sí",press:function(){t.update(g,b,{success:function(t,i){sap.m.MessageBox.success("Su inclusión / cambio ha comenzado y se seguirá procesando. Espere comentarios o siga la aplicación.",{actions:["OK"],onClose:function(t){e.getView().getModel().refresh(true);e.getRouter().navTo("DEPENDENTES")}})},error:function(e){var t=e;t=t.responseText;var i=JSON.parse(t);var a=i.error.message.value;sap.m.MessageBox.error(a);return}});I.close()}}),endButton:new a({text:"No",press:function(){I.close()}}),afterClose:function(){I.destroy()}});I.open()},onBackMaster:function(){this.getRouter().navTo("master")},onDeleteSelectedItems:function(e){this.getView().byId("IdParentesco").setEditable(true);var t="0021";var i=this.getView().byId("IdParentesco").getSelectedKey();var r=this.getView().getModel();var l="0000";var o=this.getView().byId("IdFavor").getValue();var n="00";var g="0";var b="E";var I=e.getParameters("listItem");var V=I.documentId;V=parseInt(V);var u=this.getView().byId("idTipo").getValue();var y=this.getView().byId("idCpf").getValue();if(u==="Em ResoluÃ§Ã£o"){sap.m.MessageBox.error("Não será possivel exclusão do anexo, quando o chamado ja existir.");return}var h="/ZET_GLRH_UPLOADSet(Ano='"+l+"',Favor='"+o+"',Infty='"+t+"',Mes='"+n+"',Pernr='"+g+"',Tipo='"+b+"',Subty='"+i+"',DocId="+V+",Objps='',Icnum='"+y+"',Dependentes='',Valor='')";var c={};c.DocId=V;var w=this.getView().byId("UploadCollection");var f=new s({title:"Confirmación",type:"Message",content:new d({text:"¿Confirmar la eliminación del archivo adjunto?"}),beginButton:new a({text:"Sí",press:function(){r.update(h,c,{success:function(e,t){sap.m.MessageBox.success("Documentos eliminados correctamente.",{actions:["OK"],onClose:function(e){w.getBinding("items").refresh(true)}})},error:function(e){var t=e;t=t.responseText;var i=JSON.parse(t);var a=i.error.message.value;sap.m.MessageBox.error(a,{actions:["OK"],onClose:function(e){}});return}});f.close()}}),endButton:new a({text:"No",press:function(){f.close()}}),afterClose:function(){f.destroy()}});f.open()},FormatIrflg:function(e){if(e==="X"){return"S"}else{return"N"}},FormatPlano:function(e){if(e==="11"||e==="12"){return false}else{return true}},formatSimNao:function(e){if(e==="X"){return"S"}else{return"N"}},onChangeZzregion:function(){var e=this.getView().byId("idDepartamento").getSelectedKey();var t=this.getView().byId("idProvincia");var i=new sap.ui.model.Filter("Regio",sap.ui.model.FilterOperator.EQ,e);t.getBinding("items").filter([i]);this.getView().byId("idProvincia").setEditable(true)},onChangeZzcounc:function(){var e=this.getView().byId("idDepartamento").getSelectedKey();var t=this.getView().byId("idProvincia").getSelectedKey();var i=new sap.ui.model.Filter("Regio",sap.ui.model.FilterOperator.EQ,e);var a=new sap.ui.model.Filter("Counc",sap.ui.model.FilterOperator.EQ,t);var s=this.getView().byId("idDistrito");s.getBinding("items").filter([i,a]);this.getView().byId("idDistrito").setEditable(true)},onChangeZzcityc:function(){var e=this.getView().byId("idDepartamento").getSelectedKey();var t=this.getView().byId("idProvincia").getSelectedKey();var i=this.getView().byId("idDistrito").getSelectedKey();var a=e+t+i;this.getView().byId("idUbigeo").setValue(a)}})});