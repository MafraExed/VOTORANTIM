"use strict";var _excluded=["status"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _objectWithoutProperties(e,t){if(e==null)return{};var r=_objectWithoutPropertiesLoose(e,t);var o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){o=i[n];if(t.indexOf(o)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,o))continue;r[o]=e[o]}}return r}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var r={};var o=Object.keys(e);var n,i;for(i=0;i<o.length;i++){n=o[i];if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}
/*!
 * SiGC - GestiÃ³n de Compras
 * (c) Copyright 2022 Innova Internacional S.A.S.
 */sap.ui.define(["../BaseController","com/innova/sigc/formatter/date","com/innova/sigc/formatter/formatStatus","com/innova/sigc/model/constant","com/innova/sigc/model/session/SessionStorageModel","com/innova/sigc/service/http","com/innova/sigc/utils/isEmpty"],function(e,t,r,o,n,i,s){return e.extend("com.innova.sigc.controller.biddingProcess.List",{formatter:{formatDate:t},onInit:function e(){this._oModel=new n("PROCESS_LIST",{data:[]});this.setModel(this._oModel);this._oContentPage=this.byId("page");this._oProcessTable=this.byId("processTable");this.getRouter().getRoute("listBiddingProcesses").attachPatternMatched(this._onListProcessesMatched,this)},onItemPress:function e(t){this.getRouter().navTo("manageBiddingProcess",{query:window.encodeURIComponent(t.getBindingContext().getProperty("numProc"))},{},true)},_onListProcessesMatched:function e(){var t=this;var r=this._getReq();Promise.resolve(this._oContentPage.setBusy(true)).then(i.post.bind(i,o.api.PROCESS_FILTER_PATH,r)).then(function(e){var o=e.data;t._oModel.setData({data:t._buildProcessStatus({data:o,i18n:t.getResourceBundle()}),req:r})}).catch(this.errorHandler.bind(this)).then(this._oContentPage.setBusy.bind(this._oContentPage,false))},_buildProcessStatus:function e(t){var o=t.data,n=t.i18n;return o.map(function(e){var t=e.status,o=_objectWithoutProperties(e,_excluded);return _objectSpread(_objectSpread({},o),{},{status:r({status:t,i18n:n})})})},_getReq:function e(){var t=this.getOwnerComponent().getModel("store");var r=t.getProperty("/req");if(s(r)){return this._oModel.getProperty("/req")}return r}})});