"use strict";function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(!e)return;if(typeof e==="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}function _arrayLikeToArray(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,o=new Array(t);r<t;r++){o[r]=e[r]}return o}function _iterableToArrayLimit(e,t){var r=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r==null)return;var o=[];var n=true;var i=false;var a,s;try{for(r=r.call(e);!(n=(a=r.next()).done);n=true){o.push(a.value);if(t&&o.length===t)break}}catch(e){i=true;s=e}finally{try{if(!n&&r["return"]!=null)r["return"]()}finally{if(i)throw s}}return o}function _arrayWithHoles(e){if(Array.isArray(e))return e}
/*!
 * SiGC - GestiÃ³n de Compras
 * (c) Copyright 2022 Innova Internacional S.A.S.
 */sap.ui.define(["./Base","com/innova/sigc/lib/formUtils/formUtils","com/innova/sigc/lib/searchHelp/externalSearchHelp","com/innova/sigc/lib/searchHelp/searchHelp","com/innova/sigc/model/constant","com/innova/sigc/model/process/processStatus/ProcessStatus","com/innova/sigc/service/http","com/innova/sigc/utils/isEmpty","sap/ui/model/json/JSONModel"],function(e,t,r,o,n,i,a,s,c){return e.extend("com.innova.sigc.controller.biddingProcess.SelectionCriteria",{externalSearchHelp:r,searchHelp:o,onInit:function e(){this._oReq={};this._oContentPage=this.byId("page");this._oForm=this.byId("form");this._oFormModel=new c({valueHelp:{catProc:[],tipoProc:[]},processStatus:this._buildStatus(i)});this.setModel(this._oFormModel);this._oRouter=this.getRouter();this._oRouter.getRoute("biddingProcess").attachMatched(this._onRouteMatched,this)},onAfterRendering:function e(){this._bindView()},_onRouteMatched:function e(){this.onLoadItems(this.byId("tipoProcMultiComboBox"));this.onLoadItems(this.byId("catProcMultiComboBox"))},_bindView:function e(){try{t.addValidatorAllMultiInputs({fields:this._oForm.getControlsByFieldGroupId("MultiInputGroup")})}catch(e){this.errorHandler(e)}},_getFormData:function e(r){var o=r.getFormContainers(),n=_slicedToArray(o,2),i=n[0],a=n[1];var s=t.getDataFromFormContainer(i);var c=t.getDataFromFormContainer(a);return _objectSpread(_objectSpread({},s),{},{position:c})},_buildStatus:function e(t){var r=this.getResourceBundle();return Object.entries(t).map(function(e){var t=_slicedToArray(e,2),o=t[1];return _objectSpread(_objectSpread({},o),{},{description:r.getText(o.text)})})},onNavBack:function e(){this.onResetForm();this._oRouter.navTo("home",{},{},true)},onManageBiddingProcess:function e(){var t=this.getModel("main");var r=t.getProperty("/sysParams/SMTP_ADDR");if(s(r)){sap.m.MessageBox.error(this.getResourceBundle().getText("0434",[t.getProperty("/sysParams/UNAME")]));return}this._oRouter.navTo("manageBiddingProcess",{},{},true)},onListBiddingProcesses:function e(){var t=this;var r=this._getFormData(this._oForm);Promise.resolve(this._oContentPage.setBusy(true)).then(function(){return t._getFormData(t._oForm)}).then(a.post.bind(a,n.api.PROCESS_FILTER_PATH,r)).then(function(e){var o=e.data;if(!o.length){throw new Error(t.getResourceBundle().getText("0135"))}t.getModel("store").setProperty("/req",r);t._oRouter.navTo("listBiddingProcesses",{},{},true)}).catch(this.errorHandler.bind(this)).then(this._oContentPage.setBusy.bind(this._oContentPage,false))},onResetForm:function e(){this._oForm.getFormContainers().forEach(function(e){t.cleanFields({formElements:e.getFormElements()})})}})});