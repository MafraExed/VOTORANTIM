"use strict";sap.ui.define(["sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(t,e){return{onSeeOfferAttachment:function n(o){var i=this;var a=this.getView();t.load({id:a.getId(),name:"com.innova.sigc.view.biddingProcess.dialog.qualification.SeeOfferAttachments",controller:this}).then(function(t){var n=t;a.addDependent(n);var r=i.byId("offerAttachmentsUploadSet");r.getToolbar().setVisible(false);r.addDelegate({ondragenter:function t(e){e.stopPropagation()},ondragover:function t(e){e.stopPropagation()},ondrop:function t(e){e.stopPropagation()}},r);r.setModel(new e(o));n.getEndButton().attachPress(n.close.bind(n));n.attachAfterClose(n.destroy.bind(n));i._oSeeOfferAttachmentsDialog=n;n.open()})},onDownloadOfferAttachment:function t(e){e.preventDefault();var n=e.getParameter("item");var o=n.getBindingContext();var i=o.getProperty("id");Promise.resolve(this._oSeeOfferAttachmentsDialog.setBusy(true)).then(this._fecthAttachments.bind(this,{context:o,id:i})).catch(this.errorHandler.bind(this)).finally(this._oSeeOfferAttachmentsDialog.setBusy.bind(this._oSeeOfferAttachmentsDialog,false))},onDoNotUploadFiles:function t(e){e.preventDefault()},onShowComment:function e(n){var o=this.getView();if(!this._pPopover){this._pPopover=t.load({id:o.getId(),name:"com.innova.sigc.view.biddingProcess.dialog.qualification.SeeAttachedComment",controller:this}).then(function(t){o.addDependent(t);t.getEndButton().attachPress(t.close.bind(t));return t})}this._pPopover.then(function(t){t.close();var e=n.getBindingContext().getProperty("comments");t.destroyContent().addContent(new sap.m.FormattedText({htmlText:e}));t.openBy(n)})},_additionalInformationStrategy:function t(){var n=this._oFormModel.getProperty("/offers");var o=n.filter(function(t){var e;return!!t.comentCab||!!((e=t.attachments)!==null&&e!==void 0&&e.length)});this.byId("additionalInformationList").setModel(new e({offers:o}))}}});