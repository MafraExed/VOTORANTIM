"use strict";
/*!
 * SiGC - GestiÃ³n de Compras
 * (c) Copyright 2022 Innova Internacional S.A.S.
 */sap.ui.define(["com/innova/sigc/model/constant","com/innova/sigc/service/http","sap/base/util/deepExtend","sap/m/MessageBox"],function(e,t,s,n){return{handleOpenProcessTypeDialogOpen:function e(t){var s=this;if(!this._oCreateNewData){this._oCreateNewData=sap.ui.core.Fragment.load({name:"com.innova.sigc.view.settings.fragment.CreateProcessType",controller:this}).then(function(e){s.getView().addDependent(e);e.addStyleClass(s.getOwnerComponent().getContentDensityClass());e.setModel(s.getView().getModel("Settings"),"Settings");if(!t){e.getModel("Settings").setProperty("/createprocesstype",{type:"",description:"",language:s.getModel("main").getProperty("/currentLanguage")})}e.setModel(s.getView().getModel("i18n"),"i18n");return e})}this._oCreateNewData.then(function(e){e.open()})},onAddNewProcessTypeRecord:function e(){this.bUpdateRecord=false;this.getView().getModel("Settings").setProperty("/IsCreateProcessType",true);this.getView().getModel("Settings").setProperty("/createprocesstype",{type:"",description:"",language:this.getModel("main").getProperty("/currentLanguage")});this.handleOpenProcessTypeDialogOpen()},onProcessTypeEditPress:function e(){var t=this.getView().getModel("Settings").getProperty("/selectedTableRow");if(t.length===0){n.error(this.getResourceBundle().getText("Commons.0022"));return}var r=s({},t[0]);this.bUpdateRecord=true;this.getView().getModel("Settings").setProperty("/IsCreateProcessType",false);this.getView().getModel("Settings").setProperty("/createprocesstype",r);this.handleOpenProcessTypeDialogOpen(r)},onProcessTypeDeletePress:function t(){var s=this.getView().getModel("Settings").getProperty("/selectedTableRow");if(s.length===0){n.error(this.getResourceBundle().getText("Commons.0022"));return}var r=s[0];this._openDeleteRecordDialog(r.id,e.api.PROCESS_TYPE_PATH)},onCreateProcessTypePress:function t(){var r=this;var o=s({},this.getView().getModel("Settings").getProperty("/createprocesstype"));var i=this;var a=i.getView().getModel("main").getProperty("/sysParams/UNAME");var g="";if(!this.bUpdateRecord){g={createdBy:a}}else{g={processTypeId:o.id,language:o.language,description:o.description}}if(this.bUpdateRecord){this.handleSaveorUpdate(g,o.id,"".concat(e.api.DESCRIPTION_PROCESS_TYPE,"/").concat(o.id)).then(function(e){if(e.statusText==="OK"){i.getProcessTypes();n.success(r.getResourceBundle().getText("0232"))}}).catch(function(e){n.error(e.message)})}else{this.handleSaveorUpdate(g,"",e.api.PROCESS_TYPE_PATH).then(function(t){o=i.getView().getModel("Settings").getProperty("/createprocesstype");var s={processTypeId:t.data.id,language:r.getModel("main").getProperty("/currentLanguage"),description:o.description};i.handleSaveorUpdate(s,"",e.api.DESCRIPTION_PROCESS_TYPE).then(function(e){if(e.statusText==="Created"){i.getProcessTypes();n.success(r.getResourceBundle().getText("0233"))}}).catch(function(e){n.error(e.message)})})}this.handleCloseProcessTypeDialog()},handleCloseProcessTypeDialog:function e(){this._oCreateNewData.then(function(e){e.close()})},getProcessTypes:function s(){var n=this.getModel("main").getProperty("/currentLanguage");return t.get("".concat(e.api.PROCESS_TYPE_PATH,"?language=").concat(n)).then(this._handleResponseData.bind(this))}}});