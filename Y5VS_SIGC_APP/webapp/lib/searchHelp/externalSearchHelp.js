"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}
/*!
 * SiGC - GestiÃ³n de Compras
 * (c) Copyright 2022 Innova Internacional S.A.S.
 */sap.ui.define(["com/innova/sigc/model/constant","com/innova/sigc/service/http","com/innova/sigc/lib/formUtils/formUtils","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,n,r,o,i,a){var c={tipoProc:function n(){return t.get("".concat(e.api.PROCESS_TYPE_PATH)).then(function(e){var t=e.data;return t})},catProc:function n(){return t.get("".concat(e.api.PROCESS_CATEGORY_PATH)).then(function(e){var t=e.data;return t}).then(function(e){return e.map(function(e){var t;return{id:e.id,description:e===null||e===void 0?void 0:(t=e.catDescription[0])===null||t===void 0?void 0:t.description}})})},vendors:function n(){return t.get("".concat(e.api.VENDORS_PATH)).then(function(e){var t=e.data;return t}).then(function(e){return e.map(function(e){return{id:e.lifnr,description:e.lifnr}})})}};var l={MultiInput:function e(t,n){var r=n.control,o=n.key;return t.map(function(e){return _objectSpread(_objectSpread({},e),{},{selected:r.getTokens().some(function(t){return t.getKey()===e[o]})})})},Input:function e(t,n){var r=n.control,o=n.key;t.map(function(e){return _objectSpread(_objectSpread({},e),{},{selected:e[o]===r.getValue()})})}};var s={onValueHelpRequest:function e(t){var n=t.getSource();var r=n.getName();this._oControlSHelp=n;Promise.resolve(n.setBusy(true)).then(c["".concat(r)].bind(this)).then(s._configDialogProps.bind(this)).then(s._showDialog.bind(this)).catch(this.errorHandler.bind(this)).finally(n.setBusy.bind(n,false))},onConfirmSelectedOption:function e(t){try{var r=t.getParameter("selectedContexts");var o=[];r.forEach(function(e){o.push(e.getObject())});n.setMultiInputDataVendor({field:this._oControlSHelp,data:o})}catch(e){this.errorHandler(e)}},_selectValues:function e(t){var n=t.data,r=t.control;var o=r.getMetadata().getName();return l["".concat(o.split(".").pop())](n,{control:r,key:"description"})},_configDialogProps:function e(t){return new o({data:s._selectValues({data:t,control:this._oControlSHelp}),props:{multiSelect:!!this._oControlSHelp.data("multi")}})},_showDialog:function e(t){var n=this;if(!this._oValueHelpExDialog){this._oValueHelpExDialog=r.load({id:this.getView().getId(),name:"com.innova.sigc.view.searchHelp.ExternalSearchHelpDialog",controller:this}).then(function(e){var t=e;n.getView().addDependent(t);t.addStyleClass(n.getOwnerComponent().getContentDensityClass());return t})}this._oValueHelpExDialog.then(function(e){e.setModel(t);e.getBinding("items").filter([]);e.open()})},onSearch:function e(t){var n=t.getSource();var r=t.getParameter("value");var o=[];if(r&&r.length>0){o.push(new i("description","".concat(a.Contains.toString()),r))}var c=n.getBinding("items");if(o.length!==0){c.filter(new i(o,false))}else{c.filter([])}}};return s});