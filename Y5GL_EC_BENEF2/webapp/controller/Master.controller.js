sap.ui.define(["Y5GL_EC_BENEF2/Y5GL_EC_BENEF2/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/FilterOperator","sap/m/GroupHeaderListItem","sap/ui/Device","sap/ui/core/Fragment","Y5GL_EC_BENEF2/Y5GL_EC_BENEF2/model/formatter"],function(t,e,r,i,n,a,s,o,u,E){"use strict";return t.extend("Y5GL_EC_BENEF2.Y5GL_EC_BENEF2.controller.Master",{formatter:E,onInit:function(){var t=this.byId("list"),e=this._createViewModel(),r=t.getBusyIndicatorDelay();this._oList=t;this._oListFilterState={aFilter:[],aSearch:[]};this.setModel(e,"masterView");t.attachEventOnce("updateFinished",function(){e.setProperty("/delay",r)});this.getView().addEventDelegate({onBeforeFirstShow:function(){}.bind(this)});this.getRouter().getRoute("master").attachPatternMatched(this._onMasterMatched,this);this.getRouter().attachBypassed(this.onBypassed,this)},formatStateEStatus:function(t){if(t==="A"){return"Success"}return"None"},formatTextEStatus:function(t){if(t==="A"){return"Em Aprovação"}return" "},formatIconList:function(t){var e=jQuery.sap.getModulePath("Y5GL_EC_BENEF2.Y5GL_EC_BENEF2");var r=e+"/Icone/";var i;if(t==="COOPERATIVA"){i=r+"PREVIDENCIA.png";return i}if(t==="GREMIO_CLUBE"){i=r+"PREVIDENCIA.png";return i}if(t==="EMP_CONSIGNADO"){i=r+"ADIANTAMENTO_15.png";return i}if(t==="REEMBOLSO_ALUGUEL"){i=r+"ADIANTAMENTO_15.png";return i}if(t==="REEMBOLSO_EXT_UNIV"){i=r+"REEMBOLSO_EDUCACAO.png";return i}if(t==="AUXILIO_CRECHE"){i=r+"AUXILIO_CRECHE.png";return i}if(t==="ALIMENTACAO"){i=r+"CESTA_BASICA.png";return i}if(t==="FARMACIA"){i=r+"FARMACIA.png";return i}if(t==="FUNSEJEM"){i=r+"ADIANTAMENTO_15.png";return i}if(t==="PLANO_MEDICO"){i=r+"PLANO_MEDICO.png";return i}if(t==="PLANO_ODONTOLOGICO"){i=r+"ODONTO.png";return i}if(t==="SEGURO_VIDA"){i=r+"SEGURO_VIDA.png";return i}if(t==="TRANSPORTE"){i=r+"TRANSPORTE.png";return i}if(t==="PREVIDENCIA_PRIVADA"){i=r+"PREVIDENCIA.png";return i}if(t==="PREV_PRIV_BAS"){i=r+"ADIANTAMENTO_15.png";return i}if(t==="PREV_PRIV_ESP"){i=r+"ADIANTAMENTO_15.png";return i}if(t==="PREV_PRIV_NOR"){i=r+"ADIANTAMENTO_15.png";return i}if(t==="PREV_PRIV_SUP"){i=r+"ADIANTAMENTO_15.png";return i}if(t==="CESTA_BASICA"){i=r+"CESTA_BASICA.png";return i}if(t==="REEMBOLSO_ESTACIONAM"){i=r+"ESTACIONAMENTO.png";return i}if(t==="REEMBOLSO_EDUCACAO"){i=r+"REEMBOLSO_EDUCACAO.png";return i}if(t==="REEMBOLSO_SUBSIDIO"){i=r+"PPRRV.png";return i}if(t==="MATERIAL_ESCOLAR"){i=r+"REEMBOLSO_EDUCACAO.png";return i}if(t==="REEMBOLSO_IDIOMA"){i=r+"REEMBOLSO_EDUCACAO.png";return i}if(t==="REEMBOLSO_MEDICAM"){i=r+"FARMACIA.png";return i}return" "},formatHighLight:function(t){if(t==="A"){return"Success"}return"Information"},onUpdateFinished:function(t){},onSearch:function(t){if(t.getParameters().refreshButtonPressed){this.onRefresh();return}var e=t.getParameter("query");if(e){this._oListFilterState.aSearch=[new i("Programm",a.Contains,e)]}else{this._oListFilterState.aSearch=[]}this._applyFilterSearch()},onRefresh:function(){this._oList.getBinding("items").refresh()},onOpenViewSettings:function(t){var e="filter";if(t.getSource()instanceof sap.m.Button){var r=t.getSource().getId();if(r.match("sort")){e="sort"}else if(r.match("group")){e="group"}}if(!this.byId("viewSettingsDialog")){u.load({id:this.getView().getId(),name:"Y5GL_EC_BENEF2.Y5GL_EC_BENEF2.view.ViewSettingsDialog",controller:this}).then(function(t){this.getView().addDependent(t);t.addStyleClass(this.getOwnerComponent().getContentDensityClass());t.open(e)}.bind(this))}else{this.byId("viewSettingsDialog").open(e)}},onConfirmViewSettingsDialog:function(t){this._applySortGroup(t)},_applySortGroup:function(t){var e=t.getParameters(),r,i,a=[];r=e.sortItem.getKey();i=e.sortDescending;a.push(new n(r,i));this._oList.getBinding("items").sort(a)},onSelectionChange:function(t){var e=t.getParameters("listItem").listItem.getBindingContext().getProperty("Bukrs");this.setEmpresa(e);var r=!o.system.phone;var i="BENEFICIOS_DETAIL";var n=t.getParameters("listItem").listItem;if(n!==undefined){var a=t.getParameters("listItem").listItem.getBindingContext().getProperty("Zdesc");var s=t.getParameters("listItem").listItem.getBindingContext().getProperty("Zparam");this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getRouter().navTo(i,{Zparam:s,Zdesc:a},r)}},onBypassed:function(){this._oList.removeSelections(true)},createGroupHeader:function(t){return new s({title:t.text,upperCase:false})},onNavBack:function(){var t=r.getInstance().getPreviousHash(),e=sap.ushell.Container.getService("CrossApplicationNavigation");if(t!==undefined||!e.isInitialNavigation()){history.go(-1)}else{e.toExternal({target:{shellHash:"#Shell-home"}})}},_createViewModel:function(){return new e({isFilterBarVisible:false,filterBarLabel:"",delay:0,title:this.getResourceBundle().getText("masterTitleCount",[0]),noDataText:this.getResourceBundle().getText("masterListNoDataText"),sortBy:"Programm",groupBy:"None"})},_onMasterMatched:function(){this.getModel("appView").setProperty("/layout","OneColumn")},_showDetail:function(t){var e=!o.system.phone;var r=t.getBindingContext().getProperty("Zdesc");var i=t.getBindingContext().getProperty("Zparam");this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getRouter().navTo(i,e)},_applyFilterSearch:function(){var t=this._oListFilterState.aSearch.concat(this._oListFilterState.aFilter),e=this.getModel("masterView");this._oList.getBinding("items").filter(t,"Application");if(t.length!==0){e.setProperty("/noDataText",this.getResourceBundle().getText("masterListNoDataWithFilterOrSearchText"))}else if(this._oListFilterState.aSearch.length>0){e.setProperty("/noDataText",this.getResourceBundle().getText("masterListNoDataText"))}},_updateFilterBar:function(t){var e=this.getModel("masterView");e.setProperty("/isFilterBarVisible",this._oListFilterState.aFilter.length>0);e.setProperty("/filterBarLabel",this.getResourceBundle().getText("masterFilterBarText",[t]))},formatterTestStatus:function(t){if(t==="A"){return"Em Aprovação"}return" "},formatterStateStatus:function(t){switch(t){case"Ativo":return"Success";break;case"Inativo":return"Error";break}},formatterIcon:function(t){switch(t){case"BENEFÍCIOS":return"sap-icon://folder";break;case"DADOS PESSOAIS":return"sap-icon://business-card";break;case"DEPENDENTES":return"sap-icon://family-care";break;case"DOCUMENTOS":return"sap-icon://sap-box";break;case"ENDERECO":return"sap-icon://addresses";break;case"FORMACAO EDUCACIONAL":return"sap-icon://study-leave";break}}})});