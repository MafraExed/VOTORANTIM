sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/m/Label","sap/m/TextArea","sap/m/ButtonType"],function(e,t,o,a,r,n,s){"use strict";return e.extend("Y5GL_DHO4.Y5GL_DHO4.controller.BaseController",{loading:function(e){if(e===false){this.getView().byId("idGif").addStyleClass("LoadingFalse")}else{this.getView().byId("idGif").removeStyleClass("LoadingFalse")}},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},adicionarponto:function(e){var t;var o;var a;var r;e+="";t=e.split(".");o=t[0];a=t.length>1?"."+t[1]:"";var n=/(\d+)(\d{3})/;while(n.test(o)){o=o.replace(n,"$1"+"."+"$2")}r=o+a;r=r.trim();return r},adicionarpontoFloat:function(e){var t;var o;var a;var r;e+="";t=e.split(".");o=t[0];a=t.length>1?"."+t[1]:"";var n=/(\d+)(\d{3})/;while(n.test(o)){o=o.replace(n,"$1"+"."+"$2")}r=o+a;return r},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},onShareEmailPress:function(){var e=this.getModel("objectView")||this.getModel("worklistView");sap.m.URLHelper.triggerEmail(null,e.getProperty("/shareSendEmailSubject"),e.getProperty("/shareSendEmailMessage"))},Aprova:function(){var e=this;var r=this.getView().byId("idChamado").getValue();var n="D";var s="/ZET_GLHR_EC_PROCESSARSet(Chamado='"+r+"')";var i=this.getView().getModel();var l={};l.Tipo=n;var u=new t({title:"Confirmação",type:"Message",content:new a({text:"¿Confirma la efectividad de la solicitud?"}),beginButton:new o({text:"Sim",press:function(){i.update(s,l,{success:function(t,o){sap.m.MessageBox.success("Solicitud completada",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(t){e.getView().getModel().refresh(true);e.getRouter().navTo("worklist")}})},error:function(e){var t=e;t=t.responseText;var o=JSON.parse(t);var a=o.error.message.value;sap.m.MessageBox.error(a,{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){}});return}});u.close()}}),endButton:new o({text:"Não",press:function(){u.close()}}),afterClose:function(){u.destroy()}});u.open()},Reprova:function(){var e=this;var a=this.getView().getModel();var i=this.getView().byId("idChamado").getValue();var l="R";var u="/ZET_GLHR_EC_PROCESSARSet(Chamado='"+i+"')";var c={};c.Tipo=l;var d;var g="";g=new t({title:"Razón de la desaprobación",type:"Message",content:[new r({text:"Describe el motivo de la desaprobación.",labelFor:"submitDialogTextarea"}),new n("submitDialogTextarea",{liveChange:function(e){d=e.getParameter("value");c.Motivo=d},width:"100%",rows:10,placeholder:"Digite aquí."})],beginButton:new o({type:s.Emphasized,text:"Ok",press:function(){if(c.Motivo===undefined){sap.m.MessageBox.error("Razón no llena");return}else{g.close();a.update(u,c,{success:function(t,o){sap.m.MessageBox.success("Solicitud rechazada",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(t){e.getView().getModel().refresh(true);e.getRouter().navTo("worklist")}})},error:function(t){var o=t;o=o.responseText;var a=JSON.parse(o);var r=a.error.message.value;sap.m.MessageBox.error(r,{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(t){e.getRouter().navTo("worklist")}});return}})}}.bind(this)}),endButton:new o({text:"Cancelar",press:function(){g.close()}}),afterClose:function(){g.destroy()}});g.open()},formatValueState:function(e){if(e==="X"){return"Error"}else{return"None"}}})});