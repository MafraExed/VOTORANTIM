sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/m/library","sap/m/Link","sap/m/MessageToast"],function(e,t,i,n,o,s){"use strict";var a=n.URLHelper;return e.extend("votorantim.corp.clocov2planmanagement.controller.Folder",{onInit:function(){this.createModel({hasChanges:false,dependentDialog:{display:"tree"}},"folderView");this.getRouter().getRoute("folder").attachPatternMatched(this._onObjectMatched,this)},mountBreadcumb:function(){const e=this.getView("task").getBindingContext().getProperty("Caminho");const t=e.split("/");const i=this.byId("idBreadcumbFolder");i.destroyLinks();for(const e of t){const t=new o({text:e,enabled:false});i.addLink(t)}},_onObjectMatched:function(e){this.getModel("appView").setProperty("/layout","TwoColumnsBeginExpanded");let t=e.getParameter("arguments");let i=`/v2_pastas(Profile='${t.profile}',Instance=${t.instance},Item='${t.item}')`;this._profile=t.profile;this._instance=t.instance;this._bindView(i)},_bindView:function(e){this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){this.getView().setBusy(true)}.bind(this),dataReceived:function(){}.bind(this)}})},_onBindingChange:function(){var e=this.getView(),t=e.getElementBinding();if(!t.getBoundContext()){this.getRouter().navTo("detail",{profile:this._profile,instance:this._instance},true);return}this.mountBreadcumb();this.getView().setBusy(false)},onCloseDetailPress:function(){this.getModel("appView").setProperty("/actionButtonsInfo/endColumn/fullScreen",false);this.getModel("appView").setProperty("/layout","OneColumn");this.getRouter().navTo("object",{objectId:"01"})},getFolderDetailViewId:function(){const e=this.byId("ObjectPageFolder").getSections();const t=e[0].getSubSections();const i=t[0].getBlocks();return i[0].getSelectedView()},onPressSaveFolder:function(){const e=["descFolderDetail"];const t=this.getFolderDetailViewId();if(this.validateInputFields(e,sap.ui.getCore().byId(t)))return;this.validateInputSAP(["idResponsavel#user","btnCalendarFolder#calendar"],sap.ui.getCore().byId(t)).then(e=>{if(e)return;this.getView().setBusy(true);this.getModel().setProperty("/"+this.getView().getBindingContext().getPath(),this.getView().getBindingContext().getObject());this.getModel().submitChanges({success:function(e){this.getView().setBusy(false);s.show(this.getView().getModel("i18n").getResourceBundle().getText("appDataSaved"));this.byId("ObjectPageFolder").setShowFooter(false);this.getView().getModel("folderView").setProperty("/hasChanges",false);this.getOwnerComponent().getModel().refresh(true)}.bind(this)})})},toggleFullScreen:function(){var e=this.getModel("appView").getProperty("/actionButtonsInfo/endColumn/fullScreen");this.getModel("appView").setProperty("/actionButtonsInfo/endColumn/fullScreen",!e);if(!e){this.getModel("appView").setProperty("/previousLayout",this.getModel("appView").getProperty("/layout"));this.getModel("appView").setProperty("/layout","MidColumnFullScreen")}else{this.getModel("appView").setProperty("/layout",this.getModel("appView").getProperty("/previousLayout"))}}})});