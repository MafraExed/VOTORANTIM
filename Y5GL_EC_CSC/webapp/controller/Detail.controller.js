sap.ui.define(["Y5GL_EC_CSC/Y5GL_EC_CSC/controller/BaseController","sap/ui/model/json/JSONModel","sap/m/library","sap/ui/Device"],function(e,t,o,i,r){"use strict";return e.extend("Y5GL_EC_CSC.Y5GL_EC_CSC.controller.Detail",{formatter:o,onInit:function(){var e=new t({busy:false,delay:0});this.getRouter().getRoute("object").attachPatternMatched(this._onObjectMatched,this);this.setModel(e,"detailView");this.getOwnerComponent().getModel().metadataLoaded().then(this._onMetadataLoaded.bind(this))},onShareInJamPress:function(){var e=this.getModel("detailView"),t=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:location.href,share:e.getProperty("/shareOnJamTitle")}}});t.open()},_onObjectMatched:function(e){var t=e.getParameter("arguments").Zdesc;var o=this.getView().byId("list");var i=new sap.ui.model.Filter("IBeneficio",sap.ui.model.FilterOperator.EQ,t);var r=t;while(r.indexOf("_")!==-1){r=r.replace("_"," ")}this.getView().byId("idTitleText").setText(r);o.getBinding("items").filter([i])},_bindView:function(e){var t=this.getView().getModel();t.setProperty("/busy",false);this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){t.setProperty("/busy",true)},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=e.getElementBinding();if(!t.getBoundContext()){this.getRouter().getTargets().display("detailObjectNotFound");this.getOwnerComponent().oListSelector.clearMasterListSelection();return}var o=t.getPath(),i=this.getResourceBundle(),r=e.getModel().getObject(o),a=r.Programm,n=r.Programm,s=this.getModel("detailView");this.getOwnerComponent().oListSelector.selectAListItem(o);s.setProperty("/saveAsTileTitle",i.getText("shareSaveTileAppTitle",[n]));s.setProperty("/shareOnJamTitle",n);s.setProperty("/shareSendEmailSubject",i.getText("shareSendEmailObjectSubject",[a]));s.setProperty("/shareSendEmailMessage",i.getText("shareSendEmailObjectMessage",[n,a,location.href]))},_onMetadataLoaded:function(){var e=this.getView().getBusyIndicatorDelay(),t=this.getModel("detailView");t.setProperty("/delay",0);t.setProperty("/busy",true);t.setProperty("/delay",e)},onCloseDetailPress:function(){this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen",false);this.getOwnerComponent().oListSelector.clearMasterListSelection();this.getRouter().navTo("master")},toggleFullScreen:function(){var e=this.getModel("appView").getProperty("/actionButtonsInfo/midColumn/fullScreen");this.getModel("appView").setProperty("/actionButtonsInfo/midColumn/fullScreen",!e);if(!e){this.getModel("appView").setProperty("/previousLayout",this.getModel("appView").getProperty("/layout"));this.getModel("appView").setProperty("/layout","MidColumnFullScreen")}else{this.getModel("appView").setProperty("/layout",this.getModel("appView").getProperty("/previousLayout"))}},onSelectionChange:function(e){var t=e.getSource(),o=e.getParameter("selected");if(!(t.getMode()==="MultiSelect"&&!o)){this._showDetail(e.getParameter("listItem")||e.getSource())}},_showDetail:function(e){var t=e.getBindingContext().getProperty("Id");var o=e.getBindingContext().getProperty("Pernr");var i=e.getBindingContext().getProperty("Subty");var r="0";var a="V";var n=e.getBindingContext().getProperty("Favor");this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");switch(t){case"DADOS_PESSOAIS":this.getRouter().navTo(t,{Pernr:o});break;case"DEPENDENTES":t="DepententeDetail";this.getRouter().navTo(t,{Pernr:o,Subty:i,Objps:r,Tipo:a,Favor:n});break;case"DOCUMENTOS":t="Documentos_Detail";this.getRouter().navTo(t,{Subty:i,Stext:"-",Tipo:a});break;case"FORMACAO":t="Forma_det";this.getRouter().navTo(t,{Pernr:o,Slart:i})}}})});