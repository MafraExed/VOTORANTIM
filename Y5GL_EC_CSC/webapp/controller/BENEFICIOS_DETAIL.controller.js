sap.ui.define(["Y5GL_EC_CSC/Y5GL_EC_CSC/controller/BaseController","sap/ui/Device","sap/m/Dialog","sap/m/Button","sap/m/Text"],function(e,a,t,s,r){"use strict";var I;var i;return e.extend("Y5GL_EC_CSC.Y5GL_EC_CSC.controller.BENEFICIOS_DETAIL",{onInit:function(){this.getRouter().getRoute("BENEFICIOS_DETAIL").attachPatternMatched(this._onObjectMatched,this);var e=sap.ushell.Container.getUser().getFullName();this.getView().byId("idTitleDep").setText(e);var a=jQuery.sap.getModulePath("Y5GL_EC_CSC.Y5GL_EC_CSC");var t=a+"/imagens/Transparente_CBA.gif";this.getView().byId("idimg").setSrc(t)},formatVisibleMsg:function(e){if(e==="Em ResoluÃ§Ã£o"){return true}else{return false}},FormatEditable:function(e){if(e===""){return true}else{return false}},formatVisiblebButton:function(e){if(e=="X"){return false}else{return true}},FormatBV:function(e){if(e==="Em ResoluÃ§Ã£o"||e===""){return false}else{return true}},formatVisibleEdit:function(e){if(e==="Em ResoluÃ§Ã£o"||e==="X"){return false}else{return true}},FormatForm:function(e){return false},_onObjectMatched:function(e){this.getView().getModel().refresh(true);var a=e.getParameter("arguments").Zparam;var t=e.getParameter("arguments").Zdesc;var s="0";this.getView().byId("idTitleDependentes").setText(t);I=a;this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ZET_GLHR_DETAIL_BENEFICIOSSet",{IPernr:s,IBeneficio:a,ITipo:"V"});this._bindView("/"+e)}.bind(this));var r;var i;switch(I){case"FUNSEJEM":r="";i="";break;case"PLANO_MEDICO":r="0167";i="MEDI";break;case"PLANO_ODONTOLOGICO":r="0167";i="DENT";break;case"PLANO_DENT_2":r="0167";i="ODNT";break;case"SEGURO_DE_VIDA":r="0168";i="VIDA";break;case"VALE_TRANSPORTE":r="0377";i="TRAN";break;case"VALE_REFEICAO":r="0377";i="VALM";break;case"AUXILIO_CRECHE":r="0377";i="CREC";break;case"COOPERATIVA":r="4707";i="";break;case"GREMIO_CLUBE":r="9003";i="";break;case"EMP_CONSIGINADO":r="";i="";break;case"FARMACIA":r="0377";i="FARM";break;case"REEMBOLSO_SUBSIDIO":r="";i="";break;case"ALIMENTACAO":r="0377";i="VALM";break;case"OTICA":r="0377";i="OTIC";break;case"CESTA_BASICA":r="0377";i="CEST";break;case"PREVIDENCIA_PRIVADA":r="0169";i="PREV";break;case"PREV_PRIV_BAS":r="0169";i="PREB";break;case"PREV_PRIV_ESP":r="0169";i="PREE";break;case"PREV_PRIV_NOR":r="0169";i="PREN";break;case"PREV_PRIV_SUP":r="0169";i="PRES";break}var o=i;if(s!==""||o!==""){var E=new sap.ui.model.Filter("Pernr",sap.ui.model.FilterOperator.EQ,s);var d=new sap.ui.model.Filter("Infty",sap.ui.model.FilterOperator.EQ,r);var n=new sap.ui.model.Filter("Subty",sap.ui.model.FilterOperator.EQ,o);var l=new sap.ui.model.Filter("Tipo",sap.ui.model.FilterOperator.EQ,"U");var c=this.getView().byId("UploadCollection");c.getBinding("items").filter([E,d,n,l])}},onBackMaster:function(){this.getView().getModel().refresh(true);this.getView().byId("IdCancelDetailDep").setVisible(false);this.getRouter().navTo("master")},onchangeIdMargemEmp:function(e){var a=this;var t;var s=e.getParameter("value");var r=e.getParameter("id");var I=r.split("DETAIL--")[1];var i;i=s;while(s.indexOf(",")!==-1){s=s.replace(",",".")}t=!isNaN(s);if(t===true){s=this.adicionarpontoFloat(i);this.getView().byId(I).setValue(s)}else{sap.m.MessageBox.error("O valor informado deverá ser um número.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){a.getView().byId("IdMargemEmp").setValue()}})}},onVoltar:function(){var e;var I;if(i===true){var o=this;var E;E=new t({title:"Confirmação",type:"Message",content:new r({text:"As alterações não seram gravadas, deseja voltar?"}),beginButton:new s({text:"Sim",press:function(){i=false;o.getView().getModel().refresh(true);o.getView().byId("IdCancelDetailDep").setVisible(false);e=!a.system.phone;I="BENEFICIOS";o.getRouter().navTo(I,e);E.close()}}),endButton:new s({text:"Não",press:function(){E.close()}}),afterClose:function(){E.destroy()}});E.open()}else{this.getView().byId("IdCancelDetailDep").setVisible(false);e=!a.system.phone;I="BENEFICIOS";this.getRouter().navTo(I,e)}},onCancel:function(){var e;var a=this;e=new t({title:"Confirmação",type:"Message",content:new r({text:"Deseja cancelar a alteração?"}),beginButton:new s({text:"Sim",press:function(){a.Cancela();e.close()}}),endButton:new s({text:"Não",press:function(){e.close()}}),afterClose:function(){e.destroy()}});e.open()},Cancela:function(){this.getView().getModel().refresh(true);i=false;this.getView().byId("IdCancelDetailDep").setVisible(false)},onSave:function(){var e;var a=this.getView().getModel();var i={};var o=this;var E=I;var d="0";var n="/ZET_GLHR_DETAIL_BENEFICIOSSet(IPernr='"+d+"',IBeneficio='"+E+"',ITipo='G')";switch(E){case"FUNSEJEM":i.Bplan=this.getView().byId("IdPlano_FUNSEJEM").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_FUNSEJEM").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_FUNSEJEM").setValueState("Success")}i.MargemFunsejem=this.getView().byId("IdMargemEmp").getValue();if(i.MargemFunsejem!==""){while(i.MargemFunsejem.indexOf(".")!==-1){i.MargemFunsejem=i.MargemFunsejem.replace(".","")}i.MargemFunsejem=i.MargemFunsejem.replace(",",".")}break;case"PLANO_MEDICO":i.Bplan=this.getView().byId("IdPlano_PLANO_MEDICO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PLANO_MEDICO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_PLANO_MEDICO").setValueState("Success")}i.CartMedica=this.getView().byId("idCartMedica").getValue();break;case"PLANO_ODONTOLOGICO":i.Bplan=this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").setValueState("Success")}i.CartDentista=this.getView().byId("IdCartDentista").getValue();break;case"SEGURO_DE_VIDA":i.Bplan=this.getView().byId("IdPlano_SEGURO_DE_VIDA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_SEGURO_DE_VIDA").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_SEGURO_DE_VIDA").setValueState("Success")}break;case"VALE_TRANSPORTE":i.Bplan=this.getView().byId("IdPlano_VALE_TRANSPORTE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_VALE_TRANSPORTE").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_VALE_TRANSPORTE").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_VALE_TRANSPORTE").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_VALE_TRANSPORTE").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_VALE_TRANSPORTE").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_VALE_TRANSPORTE").getValue();break;case"VALE_REFEICAO":i.Bplan=this.getView().byId("IdPlano_VALE_REFEICAO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_VALE_REFEICAO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_VALE_REFEICAO").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_VALE_REFEICAO").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_VALE_REFEICAO").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_VALE_REFEICAO").setValueState("Success")}break;case"AUXILIO_CRECHE":i.Bplan=this.getView().byId("IdPlano_AUXILIO_CRECHE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_AUXILIO_CRECHE").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_AUXILIO_CRECHE").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_AUXILIO_CRECHE").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_AUXILIO_CRECHE").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_AUXILIO_CRECHE").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_AUXILIO_CRECHE").getValue();break;case"COOPERATIVA":i.Rubrica=this.getView().byId("IdRubrica_COOPERATIVA").getValue();if(i.Rubrica===""){this.getView().byId("IdRubrica_COOPERATIVA").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdRubrica_COOPERATIVA").setValueState("Success")}i.Montante=this.getView().byId("IdMontanteCoop").getValue();i.Validade=this.getView().byId("IdValidadeCoop").getValue();i.Observacao=this.getView().byId("IdObservacao_COOPERATIVA").getValue();break;case"GREMIO_CLUBE":i.Bplan=this.getView().byId("IdPlano_GREMIO_CLUBE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_GREMIO_CLUBE").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdPlano_GREMIO_CLUBE").setValueState("Success")}i.Adesao=this.getView().byId("IdAdesao").getState();if(i.Adesao===true){i.Adesao="X"}else{i.Adesao=""}i.Observacao=this.getView().byId("IdObservacao_GREMIO_CLUBE").getValue();break;case"EMP_CONSIGINADO":i.Rubrica=this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").getSelectedKey();if(i.Rubrica===""){this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").setValueState("Success")}i.Montante=this.getView().byId("IdMontante_EMPRESTIMO_CONSIGINADO").getValue();i.Validade=this.getView().byId("IdValidade_EMPRESTIMO_CONSIGINADO").getValue();i.Observacao=this.getView().byId("IdObservacao_EMPRESTIMO_CONSIGINADO").getValue();break;case"FARMACIA":i.Bplan=this.getView().byId("IdPlano_FARMACIA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_FARMACIA").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_FARMACIA").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_FARMACIA").getValue();break;case"REEMBOLSO_SUBSIDIO":i.Bplan=this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").setValueState("Success")}i.Montante=this.getView().byId("IdMontante_REEMBOLSO_SUBSIDIO").getValue();i.Validade=this.getView().byId("IdValidade_REEMBOLSO_SUBSIDIO").getValue();i.Observacao=this.getView().byId("IdObservacao_REEMBOLSO_SUBSIDIO").getValue();break;case"ALIMENTACAO":i.Bplan=this.getView().byId("IdPlano_ALIMENTACAO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_ALIMENTACAO").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_ALIMENTACAO").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_ALIMENTACAO").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_ALIMENTACAO").setValueState("Error");sap.m.MessageBox.error("Informe as opções");return}else{this.getView().byId("IdOpcoes_ALIMENTACAO").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_ALIMENTACAO").getValue();break;case"OTICA":i.Bplan=this.getView().byId("IdPlano_OTICA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_OTICA").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_OTICA").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_OTICA").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_OTICA").setValueState("Error");sap.m.MessageBox.error("Informe a Opção");return}else{this.getView().byId("IdOpcoes_OTICA").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_OTICA").getValue();break;case"CESTA_BASICA":i.Bplan=this.getView().byId("IdPlano_CESTA_BASICA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_CESTA_BASICA").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_CESTA_BASICA").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_CESTA_BASICA").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_CESTA_BASICA").setValueState("Error");sap.m.MessageBox.error("Informe a Opção");return}else{this.getView().byId("IdOpcoes_CESTA_BASICA").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_CESTA_BASICA").getValue();break;case"PREVIDENCIA_PRIVADA":i.Bplan=this.getView().byId("IdPlano_PREVIDENCIA_PRIVADA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PREVIDENCIA_PRIVADA").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_PREVIDENCIA_PRIVADA").setValueState("Success")}break;case"PREV_PRIV_BAS":i.Bplan=this.getView().byId("IdPlano_PREV_PRIV_BAS").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PREV_PRIV_BAS").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_PREV_PRIV_BAS").setValueState("Success")}break;case"PREV_PRIV_ESP":i.Bplan=this.getView().byId("IdPlano_PREV_PRIV_ESP").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PREV_PRIV_ESP").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_PREV_PRIV_ESP").setValueState("Success")}break;case"PREV_PRIV_NOR":i.Bplan=this.getView().byId("IdPlano_PREV_PRIV_NOR").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PREV_PRIV_NOR").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_PREV_PRIV_NOR").setValueState("Success")}break;case"PREV_PRIV_SUP":i.Bplan=this.getView().byId("IdPlano_PREV_PRIV_SUP").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PREV_PRIV_SUP").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_PREV_PRIV_SUP").setValueState("Success")}break;case"PLANO_DENT_2":i.Bplan=this.getView().byId("IdPlano_PLANO_DENT_2").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PLANO_DENT_2").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_PLANO_DENT_2").setValueState("Success")}i.CartDentista=this.getView().byId("IdCartPLANO_DENT_2").getValue();if(i.CartDentista===""){this.getView().byId("IdCartPLANO_DENT_2").setValueState("Error");sap.m.MessageBox.error("Informe a carterinha do dentista.")}else{this.getView().byId("IdCartPLANO_DENT_2").setValueState("Success")}break;case"REFEITORIO":i.Bplan=this.getView().byId("IdPlano_REFEITORIO").getSelectedKey();i.Opcoes=this.getView().byId("IdPlano_REFEITORIO").getSelectedKey();break}i.Tipo="G";i.Beneficio=E;if(i.Montante!==""&&i.Montante!==undefined){while(i.Montante.indexOf(".")!==-1){i.Montante=i.Montante.replace(".","")}i.Montante=i.Montante.replace(",",".")}e=new t({title:"Confirmação",type:"Message",content:new r({text:"Confirma alteração/inclusão do Benefício?"}),beginButton:new s({text:"Sim",press:function(){a.update(n,i,{success:function(e,a){sap.m.MessageBox.success("Benefício salvo com sucesso.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){o.getView().getModel().refresh(true);o.getRouter().navTo("BENEFICIOS")}})},error:function(e){var a=e;a=a.responseText;var t=JSON.parse(a);var s=t.error.message.value;sap.m.MessageBox.error(s,{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){o.getRouter().navTo("BENEFICIOS")}});return}});e.close()}}),endButton:new s({text:"Não",press:function(){e.close()}}),afterClose:function(){e.destroy()}});e.open()},tirapontos:function(e){while(e.indexOf(".")!==-1){e=e.replace(".","")}while(e.indexOf(",")!==-1){e=e.replace(",",".")}return e},_bindView:function(e){var a=this;var t=this.getView().getModel();t.setProperty("/busy",false);this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){a.loading(true)},dataReceived:function(){a.loading(false)}}})},_onBindingChange:function(){var e=this.getView(),a=e.getElementBinding();if(!a.getBoundContext()){this.getRouter().getTargets().display("detailObjectNotFound");return}this.getView().byId(I).setVisible(true);var t=this.getView().byId("IdMargemEmp").getValue();if(t!==""){t=parseFloat(t).toFixed(2);while(t.indexOf(".")!==-1){t=t.replace(".",",")}t=this.adicionarpontoFloat(t);this.getView().byId("IdMargemEmp").setValue(t)}},onChange:function(e){var a=e.getSource();var t=this.getView().getModel();t.refreshSecurityToken();var s=t.oHeaders;var r=s["x-csrf-token"];var I=new sap.m.UploadCollectionParameter({name:"x-csrf-token",value:r});a.addHeaderParameter(I)},onBeforeUploadStarts:function(e){var a="0";var t;var t;var s;switch(I){case"FUNSEJEM":t="";s="";break;case"PLANO_MEDICO":t="0167";s="MEDI";break;case"PLANO_ODONTOLOGICO":t="0167";s="DENT";break;case"PLANO_DENT_2":t="0167";s="ODNT";break;case"SEGURO_DE_VIDA":t="0168";s="VIDA";break;case"VALE_TRANSPORTE":t="0377";s="TRAN";break;case"VALE_REFEICAO":t="0377";s="VALM";break;case"AUXILIO_CRECHE":t="0377";s="CREC";break;case"COOPERATIVA":t="4707";s="";break;case"GREMIO_CLUBE":t="9003";s="";break;case"EMP_CONSIGINADO":t="";s="";break;case"FARMACIA":t="0377";s="FARM";break;case"REEMBOLSO_SUBSIDIO":t="";s="";break;case"ALIMENTACAO":t="0377";s="VALM";break;case"OTICA":t="0377";s="OTIC";break;case"CESTA_BASICA":t="0377";s="CEST";break;case"PREVIDENCIA_PRIVADA":t="0169";s="PREV";break;case"PREV_PRIV_BAS":t="0169";s="PREB";break;case"PREV_PRIV_ESP":t="0169";s="PREE";break;case"PREV_PRIV_NOR":t="0169";s="PREN";break;case"PREV_PRIV_SUP":t="0169";s="PRES";break}var r=s;var i="0";if(a!==""||r!==""||i!==""){var o=a+"$"+t+"$"+r+"$"+i+"$"+e.getParameter("fileName");var E=new sap.m.UploadCollectionParameter({name:"slug",value:o});e.getParameters().addHeaderParameter(E)}},onuploadComplete:function(e){var a="0";var t;var s;switch(I){case"FUNSEJEM":t="";s="";break;case"PLANO_MEDICO":t="0167";s="MEDI";break;case"PLANO_ODONTOLOGICO":t="0167";s="DENT";break;case"PLANO_DENT_2":t="0167";s="ODNT";break;case"SEGURO_DE_VIDA":t="0168";s="VIDA";break;case"VALE_TRANSPORTE":t="0377";s="TRAN";break;case"VALE_REFEICAO":t="0377";s="VALM";break;case"AUXILIO_CRECHE":t="0377";s="CREC";break;case"COOPERATIVA":t="4707";s="";break;case"GREMIO_CLUBE":t="9003";s="";break;case"EMP_CONSIGINADO":t="";s="";break;case"FARMACIA":t="0377";s="FARM";break;case"REEMBOLSO_SUBSIDIO":t="";s="";break;case"ALIMENTACAO":t="0377";s="VALM";break;case"OTICA":t="0377";s="OTIC";break;case"CESTA_BASICA":t="0377";s="CEST";break;case"PREVIDENCIA_PRIVADA":t="0169";s="PREV";break;case"PREV_PRIV_BAS":t="0169";s="PREB";break;case"PREV_PRIV_ESP":t="0169";s="PREE";break;case"PREV_PRIV_NOR":t="0169";s="PREN";break;case"PREV_PRIV_SUP":t="0169";s="PRES";break}var r=s;if(a!==""||r!==""){var i=new sap.ui.model.Filter("Tipo",sap.ui.model.FilterOperator.EQ,"U");var o=new sap.ui.model.Filter("Infty",sap.ui.model.FilterOperator.EQ,t);var E=new sap.ui.model.Filter("Subty",sap.ui.model.FilterOperator.EQ,r);var d=this.getView().byId("UploadCollection");d.getBinding("items").filter([o,E,i])}},onmodelListContextChange:function(e){var a="0";var t;var s;switch(I){case"FUNSEJEM":t="";s="";break;case"PLANO_MEDICO":t="0167";s="MEDI";break;case"PLANO_ODONTOLOGICO":t="0167";s="DENT";break;case"PLANO_DENT_2":t="0167";s="ODNT";break;case"SEGURO_DE_VIDA":t="0168";s="VIDA";break;case"VALE_TRANSPORTE":t="0377";s="TRAN";break;case"VALE_REFEICAO":t="0377";s="VALM";break;case"AUXILIO_CRECHE":t="0377";s="CREC";break;case"COOPERATIVA":t="4707";s="";break;case"GREMIO_CLUBE":t="9003";s="";break;case"EMP_CONSIGINADO":t="";s="";break;case"FARMACIA":t="0377";s="FARM";break;case"REEMBOLSO_SUBSIDIO":t="";s="";break;case"ALIMENTACAO":t="0377";s="VALM";break;case"OTICA":t="0377";s="OTIC";break;case"CESTA_BASICA":t="0377";s="CEST";break;case"PREVIDENCIA_PRIVADA":t="0169";s="PREV";break;case"PREV_PRIV_BAS":t="0169";s="PREB";break;case"PREV_PRIV_ESP":t="0169";s="PREE";break;case"PREV_PRIV_NOR":t="0169";s="PREN";break;case"PREV_PRIV_SUP":t="0169";s="PRES";break}var r=s;if(a!==""||r!==""){var i=new sap.ui.model.Filter("Pernr",sap.ui.model.FilterOperator.EQ,a);var o=new sap.ui.model.Filter("Infty",sap.ui.model.FilterOperator.EQ,t);var E=new sap.ui.model.Filter("Subty",sap.ui.model.FilterOperator.EQ,r);var d=new sap.ui.model.Filter("Tipo",sap.ui.model.FilterOperator.EQ,"U");var n=this.getView().byId("UploadCollection");n.getBinding("items").filter([i,o,E,d])}},onDeleteSelectedItems:function(e){var a=this.getView().byId("UploadCollection");var i=a.oList;var o;var E;switch(I){case"FUNSEJEM":o="";E="";break;case"PLANO_MEDICO":o="0167";E="MEDI";break;case"PLANO_ODONTOLOGICO":o="0167";E="DENT";break;case"PLANO_DENT_2":o="0167";E="ODNT";break;case"SEGURO_DE_VIDA":o="0168";E="VIDA";break;case"VALE_TRANSPORTE":o="0377";E="TRAN";break;case"VALE_REFEICAO":o="0377";E="VALM";break;case"AUXILIO_CRECHE":o="0377";E="CREC";break;case"COOPERATIVA":o="4707";E="";break;case"GREMIO_CLUBE":o="9003";E="";break;case"EMP_CONSIGINADO":o="";E="";break;case"FARMACIA":o="0377";E="FARM";break;case"REEMBOLSO_SUBSIDIO":o="";E="";break;case"ALIMENTACAO":o="0377";E="VALM";break;case"OTICA":o="0377";E="OTIC";break;case"CESTA_BASICA":o="0377";E="CEST";break;case"PREVIDENCIA_PRIVADA":o="0169";E="PREV";break;case"PREV_PRIV_BAS":o="0169";E="PREB";break;case"PREV_PRIV_ESP":o="0169";E="PREE";break;case"PREV_PRIV_NOR":o="0169";E="PREN";break;case"PREV_PRIV_SUP":o="0169";E="PRES";break}var d=this.getView().getModel();var n="0";var l="0";var c=o;var O="0";var _="0";var b="E";var V=E;var A=e.getParameters("listItem");var u=A.documentId;u=parseInt(u);var P=this.getView().byId("idTipo").getValue();if(P==="Em ResoluÃ§Ã£o"){sap.m.MessageBox.error("Não será possivel exclusão do anexo, quando o chamado ja existir.");return}var a=this.getView().byId("UploadCollection");var S="/ZET_GLRH_UPLOADSet(Ano='"+n+"',Favor='"+l+"',Infty='"+c+"',Mes='"+O+"',Pernr='"+_+"',Tipo='"+b+"',Subty='"+V+"',DocId="+u+",Objps='',Icnum='')";var R={};R.DocId=1;var C=new t({title:"Confirmação",type:"Message",content:new r({text:"Confirma a exclusão anexo?"}),beginButton:new s({text:"Sim",press:function(){d.update(S,R,{success:function(e,t){sap.m.MessageBox.success("Documentos excluido com suceso.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){a.getBinding("items").refresh(true)}})},error:function(e){var t=e;t=t.responseText;var s=JSON.parse(t);var r=s.error.message.value;sap.m.MessageBox.error(r,{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){a.getBinding("items").refresh(true)}});return}});C.close()}}),endButton:new s({text:"Não",press:function(){C.close()}}),afterClose:function(){C.destroy()}});C.open()},onEdit:function(){var e=this.getView();i=true;switch(I){case"FUNSEJEM":e.byId("IdPlano_FUNSEJEM").setEditable(true);e.byId("IdMargemEmp").setEditable(true);break;case"PLANO_MEDICO":e.byId("IdPlano_PLANO_MEDICO").setEditable(true);e.byId("idCartMedica").setEditable(true);break;case"PLANO_ODONTOLOGICO":e.byId("IdPlano_PLANO_ODONTOLOGICO").setEditable(true);e.byId("IdCartDentista").setEditable(true);break;case"PLANO_DENT_2":e.byId("IdPlano_PLANO_DENT_2").setEditable(true);e.byId("IdCartPLANO_DENT_2").setEditable(true);case"SEGURO_DE_VIDA":e.byId("IdPlano_SEGURO_DE_VIDA").setEditable(true);break;case"VALE_TRANSPORTE":e.byId("IdPlano_VALE_TRANSPORTE").setEditable(true);e.byId("IdOpcoes_VALE_TRANSPORTE").setEditable(true);e.byId("IdObservacao_VALE_TRANSPORTE").setEditable(true);break;case"VALE_REFEICAO":e.byId("IdPlano_VALE_REFEICAO").setEditable(true);e.byId("IdOpcoes_VALE_REFEICAO").setEditable(true);break;case"AUXILIO_CRECHE":e.byId("IdPlano_AUXILIO_CRECHE").setEditable(true);e.byId("IdOpcoes_AUXILIO_CRECHE").setEditable(true);e.byId("IdObservacao_AUXILIO_CRECHE").setEditable(true);break;case"COOPERATIVA":e.byId("IdRubrica_COOPERATIVA").setEditable(true);e.byId("IdMontanteCoop").setEditable(true);e.byId("IdValidadeCoop").setEditable(true);e.byId("IdObservacao_COOPERATIVA").setEditable(true);break;case"GREMIO_CLUBE":e.byId("IdPlano_GREMIO_CLUBE").setEditable(true);e.byId("IdObservacao_GREMIO_CLUBE").setEditable(true);break;case"EMP_CONSIGINADO":e.byId("IdPlano_EMPRESTIMO_CONSIGINADO").setEditable(true);e.byId("IdMontante_EMPRESTIMO_CONSIGINADO").setEditable(true);e.byId("IdValidade_EMPRESTIMO_CONSIGINADO").setEditable(true);e.byId("IdObservacao_EMPRESTIMO_CONSIGINADO").setEditable(true);break;case"FARMACIA":e.byId("IdPlano_FARMACIA").setEditable(true);e.byId("IdObservacao_FARMACIA").setEditable(true);break;case"REEMBOLSO_SUBSIDIO":e.byId("IdPlano_ALIMENTACAO").setEditable(true);e.byId("IdMontante_REEMBOLSO_SUBSIDIO").setEditable(true);e.byId("IdValidade_REEMBOLSO_SUBSIDIO").setEditable(true);e.byId("IdObservacao_REEMBOLSO_SUBSIDIO").setEditable(true);break;case"ALIMENTACAO":e.byId("IdPlano_ALIMENTACAO").setEditable(true);e.byId("IdOpcoes_ALIMENTACAO").setEditable(true);e.byId("IdObservacao_ALIMENTACAO").setEditable(true);break;case"OTICA":e.byId("IdPlano_OTICA").setEditable(true);e.byId("IdOpcoes_OTICA").setEditable(true);e.byId("IdObservacao_OTICA").setEditable(true);break;case"CESTA_BASICA":e.byId("IdPlano_CESTA_BASICA").setEditable(true);e.byId("IdOpcoes_CESTA_BASICA").setEditable(true);e.byId("IdObservacao_CESTA_BASICA").setEditable(true);break;case"PREVIDENCIA_PRIVADA":e.byId("IdPlano_PREVIDENCIA_PRIVADA").setEditable(true);break;case"PREV_PRIV_BAS":e.byId("IdPlano_PREV_PRIV_BAS").setEditable(true);break;case"PREV_PRIV_ESP":e.byId("IdPlano_PREV_PRIV_ESP").setEditable(true);break;case"PREV_PRIV_NOR":e.byId("IdPlano_PREV_PRIV_NOR").setEditable(true);break;case"PREV_PRIV_SUP":e.byId("IdPlano_PREV_PRIV_SUP").setEditable(true);break}e.byId("IdSalvarDetailDep").setVisible(true);e.byId("IdCancelDetailDep").setVisible(true);e.byId("IdEditDetailDep").setVisible(false);e.byId("UploadCollection").setUploadButtonInvisible(false)}})});