sap.ui.define(["Y5GL_APROVB/Y5GL_APROVB/controller/BaseController","sap/ui/Device","sap/m/Dialog","sap/m/Button","sap/m/Text"],function(e,t,s,a,o){"use strict";return e.extend("Y5GL_APROVB.Y5GL_APROVB.controller.FORMACAO_DETAIL",{onInit:function(){this.getRouter().getRoute("FORMACAO_ADD").attachPatternMatched(this._onObjectMatched,this);this.getRouter().getRoute("FORMACAO_DETAIL").attachPatternMatched(this._onDetail,this)},onVoltar:function(){var e=!t.system.phone;this.getRouter().navTo("FORMACAO",e)},onBackMaster:function(){this.getRouter().navTo("master")},_onObjectMatched:function(e){var t=e.getParameter("arguments").Pernr;var s=e.getParameter("arguments").Objps;this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ZET_GLHR_FORM_EMP_ECSet",{Pernr:t,Objps:s});this._bindView("/"+e)}.bind(this))},_bindView:function(e){var t=this.getView().getModel();t.setProperty("/busy",false);this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){t.setProperty("/busy",true)},dataReceived:function(){t.setProperty("/busy",false)}}})},_onBindingChange:function(){var e=this.getView(),t=e.getElementBinding();if(!t.getBoundContext()){this.getRouter().getTargets().display("detailObjectNotFound");this.getOwnerComponent().oListSelector.clearMasterListSelection();return}},_onDetail:function(){},onSave:function(){var e;var t=this;var r=this.getView().getModel();var i={};var n="0";var d="0";var u="/ZET_GLHR_FORM_EMP_ECSet(Pernr='"+n+"',Objps='"+d+"')";i.Slart=this.getView().byId("IdEstEnsino").getSelectedKey();if(i.Slart===""){this.getView().byId("IdEstEnsino").setValueState("Error");sap.m.MessageBox.error("Por favor, informe o tipo de Estabelecimento de Ensino.");return}else{this.getView().byId("IdEstEnsino").setValueState("Success")}i.Insti=this.getView().byId("IdInstituicao").getValue();if(i.Insti===""){this.getView().byId("IdInstituicao").setValueState("Error");sap.m.MessageBox.error("Por favor, informe a instituição de ensino.");return}else{this.getView().byId("IdInstituicao").setValueState("Success")}i.Sland=this.getView().byId("IdPais").getSelectedKey();if(i.Sland===""){this.getView().byId("IdPais").setValueState("Error");sap.m.MessageBox.error("Por favor, selecione o Pais.");return}else{this.getView().byId("IdPais").setValueState("Success")}i.Slabs=this.getView().byId("IdCertificado").getSelectedKey();if(i.Slabs===""){this.getView().byId("IdCertificado").setValueState("Error");sap.m.MessageBox.error("Por favor, informe se a formação contem Certificado.");return}else{this.getView().byId("IdCertificado").setValueState("Success")}i.Anzkl=this.getView().byId("IdDuracao").getValue();if(i.Anzkl===""){this.getView().byId("IdDuracao").setValueState("Error");sap.m.MessageBox.error("Por favor, informe duração.");return}else{this.getView().byId("IdDuracao").setValueState("Success")}i.Anzeh=this.getView().byId("IdTpDuracao").getSelectedKey();if(i.Anzeh===""){this.getView().byId("IdTpDuracao").setValueState("Error");sap.m.MessageBox.error("Por favor, informe unidade de tempo.");return}else{this.getView().byId("IdTpDuracao").setValueState("Success")}i.Ksbez=this.getView().byId("IdDenCurso").getValue();if(i.Ksbez===""){this.getView().byId("IdDenCurso").setValueState("Error");sap.m.MessageBox.error("Por favor, denominação do curso.");return}else{this.getView().byId("IdDenCurso").setValueState("Success")}i.ZenddaForm=this.getView().byId("IdDtFimForm").getValue();if(i.ZenddaForm===""){this.getView().byId("IdDtFimForm").setValueState("Error");sap.m.MessageBox.error("Por favor, data fim da formação.");return}else{this.getView().byId("IdDtFimForm").setValueState("Success")}e=new s({title:"Confirmação",type:"Message",content:new o({text:"Confirma a inclusão do benefício?"}),beginButton:new a({text:"Sim",press:function(){r.update(u,i,{success:function(e,s){sap.m.MessageBox.success("formação educacional salva com sucesso.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){t.getRouter().navTo("FORMACAO")}})},error:function(e){sap.m.MessageBox.error("Erro ao chamar o serviço")}});e.close()}}),endButton:new a({text:"Não",press:function(){e.close()}}),afterClose:function(){e.destroy()}});e.open()}})});