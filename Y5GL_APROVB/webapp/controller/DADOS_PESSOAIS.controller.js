sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/Device","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/ui/model/Filter"],function(e,a,t,o,s,r){"use strict";return e.extend("Y5GL_APROVB.Y5GL_APROVB.controller.DADOS_PESSOAIS",{onInit:function(){},onSave:function(){var e=this.getView();var a=e.byId("IdNomeCompleto").getValue();var r=e.byId("IdDataNascimento").getValue();var i=e.byId("IdSexo").getSelectedKey();var n=e.byId("IdNacionaliade").getSelectedKey();var d=e.byId("IdLocNascimento").getValue();var l=e.byId("IdEstNasc").getSelectedKey();var u=e.byId("IdPaisNasc").getSelectedKey();var I=e.byId("IdAposentado").getSelectedKey();var c=e.byId("IdRaca").getSelectedKey();var m=e.byId("IdCasadoDesde").getValue();var g=e.byId("IdEstCivil").getSelectedKey();var p=e.byId("IdIdioma").getSelectedKey();var f;var S=this.getView().getModel();var v=this;var y;var b;var V;var N;var E={};if(a===""||a===undefined){e.byId("IdNomeCompleto").setValueState("Error");sap.m.MessageBox.error("Informe o nome completo.");return}else{e.byId("IdNomeCompleto").setValueState("None");E.Nome=a}if(r===""||r===undefined){e.byId("IdDataNascimento").setValueState("Error");sap.m.MessageBox.error("Informe a data de nascimento.");return}else{e.byId("IdDataNascimento").setValueState("None");r=r.substring(0,4)+r.substring(5,7)+r.substring(8,10);E.DtNasc=r}if(i===""||i===undefined){e.byId("IdSexo").setValueState("Error");sap.m.MessageBox.error("Informe o sexo.");return}else{e.byId("IdSexo").setValueState("None");E.Sexo=i}if(n===""||n===undefined){e.byId("IdNacionaliade").setValueState("Error");sap.m.MessageBox.error("Informe a nacionalidade.");return}else{e.byId("IdNacionaliade").setValueState("None");E.Nacionalidade=n}if(d===""||d===undefined){e.byId("IdLocalNascimento").setValueState("Error");sap.m.MessageBox.error("Informe a local de nascimento.");return}else{e.byId("IdLocNascimento").setValueState("None");d=this.getView().byId("IdCodNat").getValue();d=d.split("-");d=d[0];E.Municipio=d}if(l===""||l===undefined){e.byId("IdEstNasc").setValueState("Error");sap.m.MessageBox.error("Informe o estado de nascimento.");return}else{e.byId("IdEstNasc").setValueState("None");E.Estado=l}if(u===""||u===undefined){e.byId("IdPaisNasc").setValueState("Error");sap.m.MessageBox.error("Informe o pais de nascimento.");return}else{e.byId("IdPaisNasc").setValueState("None");E.Pais=u}if(p===""||p===undefined){e.byId("IdIdioma").setValueState("Error");sap.m.MessageBox.error("Informe o idioma.");return}else{e.byId("IdIdioma").setValueState("None");E.Idioma=p}if(g===""||g===undefined){e.byId("IdEstCivil").setValueState("Error");sap.m.MessageBox.error("Informe o estado civil.");return}else{e.byId("IdEstCivil").setValueState("None");E.EstadoCivil=g}if(m===""||m===undefined){e.byId("IdCasadoDesde").setValueState("Error");sap.m.MessageBox.error("Informe a data de casamento.");return}else{e.byId("IdCasadoDesde").setValueState("None");m=m.substring(0,4)+m.substring(5,7)+m.substring(8,10);E.DtCasamento=m}if(c===""||c===undefined){e.byId("IdRaca").setValueState("Error");sap.m.MessageBox.error("Informe a raca.");return}else{e.byId("IdRaca").setValueState("None");E.Raca=c}if(I===""||I===undefined){e.byId("IdAposentado").setValueState("Error");sap.m.MessageBox.error("Informe se aposentado.");return}else{e.byId("IdAposentado").setValueState("None");E.Aposentado=I}N="/ZET_MEUS_DADOS_ECSet(Pernr='0')";f=new t({title:"Confirmação",type:"Message",content:new s({text:"Confirma a exclusão da solicitação do benefício?"}),beginButton:new o({text:"Sim",press:function(){S.update(N,E,{success:function(e,a){sap.m.MessageBox.success("Dados gravados.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){}})},error:function(e){y=e;y=y.responseText;b=JSON.parse(y);V=b.error.message.value;sap.m.MessageBox.error(V,{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){}});return}});f.close()}}),endButton:new o({text:"Não",press:function(){f.close()}}),afterClose:function(){f.destroy()}});f.open()},handleValueHelp:function(e){var a=e.getSource().getValue();this.inputId=e.getSource().getId();if(!this._valueHelpDialog1){this._valueHelpDialog1=sap.ui.xmlfragment("Y5GL_APROVB.Y5GL_APROVB.view.LocNascimento",this);this.getView().addDependent(this._valueHelpDialog1)}this._valueHelpDialog1.open(a);if(a){this._valueHelpDialog1.getBinding("items").filter([new r("IMunicipio",sap.ui.model.FilterOperator.EQ,a)])}this._valueHelpDialog1.getBinding("items").filter([new r("IUf",sap.ui.model.FilterOperator.EQ,"SP")])},onSearchMunicipio:function(e){var a=e.getParameter("value");if(a){var t=a;var o=new sap.ui.model.Filter("IMunicipio",sap.ui.model.FilterOperator.EQ,t);var s=new sap.ui.model.Filter("IUf",sap.ui.model.FilterOperator.EQ,"SP");e.getSource().getBinding("items").filter([o,s])}},onConfirmMunicipio:function(e){var a=e.getParameter("selectedItem");this._valueHelpDialog1=null;if(a){var t=a.getTitle();var o=a.getDescription();var s=o+"-"+t;this.getView().byId("IdCodNat").setValue(s);var r=this.getView().byId(this.inputId);r.setValue(t)}}})});