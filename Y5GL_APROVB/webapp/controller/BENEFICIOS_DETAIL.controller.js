sap.ui.define(["Y5GL_APROVB/Y5GL_APROVB/controller/BaseController","sap/ui/Device","sap/m/Dialog","sap/m/Button","sap/m/Text"],function(e,t,a,s,o){"use strict";return e.extend("Y5GL_APROVB.Y5GL_APROVB.controller.BENEFICIOS_DETAIL",{onInit:function(){this.getRouter().getRoute("BENEFICIOS_DETAIL").attachPatternMatched(this._onObjectMatched,this);var e=sap.ushell.Container.getUser().getFullName();this.getView().byId("idTitleDep").setText(e)},formatVisible:function(e){if(e==="A"){return true}else{return false}},formatTextEStatus:function(e){if(e==="A"){return"Em Aprovação"}return""},formatStateEStatus:function(e){if(e==="A"){return"Success"}return"None"},_onObjectMatched:function(e){var t=e.getParameter("arguments").Zparam;var a=e.getParameter("arguments").Zdesc;var s="0";this.getView().byId("idTitleDependentes").setText(a);this.getModel("appView").setProperty("/layout","TwoColumnsMidExpanded");this.getModel().metadataLoaded().then(function(){var e=this.getModel().createKey("ZET_GLHR_DETAIL_BENEFICIOSSet",{Pernr:s,Beneficio:t});this._bindView("/"+e)}.bind(this));this.getView().byId("FUNSEJEM").setVisible(false);this.getView().byId("PLANO_MEDICO").setVisible(false);this.getView().byId("PLANO_ODONTOLOGICO").setVisible(false);this.getView().byId("SEGURO_DE_VIDA").setVisible(false);this.getView().byId("VALE_TRANSPORTE").setVisible(false);this.getView().byId("VALE_REFEICAO").setVisible(false);this.getView().byId("AUXILIO_CRECHE").setVisible(false);this.getView().byId("COOPERATIVA").setVisible(false);this.getView().byId("GREMIO_CLUBE").setVisible(false);this.getView().byId("EMP_CONSIGINADO").setVisible(false);this.getView().byId("FARMACIA").setVisible(false);this.getView().byId("REEMBOLSO_SUBSIDIO").setVisible(false);this.getView().byId("ALIMENTACAO").setVisible(false);this.getView().byId(t).setVisible(true)},onBackMaster:function(){this.getRouter().navTo("master")},onchangeIdMargemEmp:function(e){var t=this;var a;var s=e.getParameter("value");var o=e.getParameter("id");var i=o.split("DETAIL--")[1];var r;r=s;while(s.indexOf(",")!==-1){s=s.replace(",",".")}a=!isNaN(s);if(a===true){s=this.adicionarpontoFloat(r);this.getView().byId(i).setValue(s)}else{sap.m.MessageBox.error("O valor informado deverá ser um número.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){t.getView().byId("IdMargemEmp").setValue()}})}},onVoltar:function(){var e=!t.system.phone;var a="BENEFICIOS";this.getRouter().navTo(a,e)},onCancel:function(){var e;var t=this.getView().getModel();var i={};var r=this;var n=this.getView().byId("idTitleDependentes").getText();var I="0";var d="/ZET_GLHR_DETAIL_BENEFICIOSSet(Pernr='"+I+"',Beneficio='"+n+"')";var l;var O;var c;var E;var l;i.Tipo="C";e=new a({title:"Confirmação",type:"Message",content:new o({text:"Deseja reprovar a solicitação do benefício?"}),beginButton:new s({text:"Sim",press:function(){t.update(d,i,{success:function(e,t){sap.m.MessageBox.success("Solicitação do benefício rejeitada com sucesso.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){r.getRouter().navTo("BENEFICIOS")}})},error:function(e){l=e;l=l.responseText;O=JSON.parse(l);E=O.error.message.value;sap.m.MessageBox.error(E,{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){r.getRouter().navTo("BENEFICIOS")}});return}});e.close()}}),endButton:new s({text:"Não",press:function(){e.close()}}),afterClose:function(){e.destroy()}});e.open()},onReprove:function(){var e;var t=this.getView().getModel();var i={};var r=this;var n=this.getView().byId("idTitleDependentes").getText();var I="0";var d="/ZET_GLHR_DETAIL_BENEFICIOSSet(Pernr='"+I+"',Beneficio='"+n+"')";i.Tipo="E";e=new a({title:"Confirmação",type:"Message",content:new o({text:"Deseja reprovar a solicitação do benefício?"}),beginButton:new s({text:"Sim",press:function(){t.update(d,i,{success:function(e,t){sap.m.MessageBox.success("Solicitação do benefício rejeitada com sucesso.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){r.getRouter().navTo("BENEFICIOS")}})},error:function(e){sap.m.MessageBox.error("Erro ao chamar o serviço")}});e.close()}}),endButton:new s({text:"Não",press:function(){e.close()}}),afterClose:function(){e.destroy()}});e.open()},onAprovar:function(){var e;var t=this.getView().getModel();var i={};var r=this;var n=this.getView().byId("idTitleDependentes").getText();var I="0";var d="/ZET_GLHR_DETAIL_BENEFICIOSSet(Pernr='"+I+"',Beneficio='"+n+"')";i.Tipo="A";e=new a({title:"Confirmação",type:"Message",content:new o({text:"Confirma a inclusão do benefício?"}),beginButton:new s({text:"Sim",press:function(){t.update(d,i,{success:function(e,t){sap.m.MessageBox.success("Benefício salvo com sucesso.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){r.getRouter().navTo("BENEFICIOS")}})},error:function(e){sap.m.MessageBox.error("Erro ao chamar o serviço")}});e.close()}}),endButton:new s({text:"Não",press:function(){e.close()}}),afterClose:function(){e.destroy()}});e.open()},onSave:function(){var e;var t=this.getView().getModel();var i={};var r=this;var n=this.getView().byId("idTitleDependentes").getText();var I="0";var d="/ZET_GLHR_DETAIL_BENEFICIOSSet(Pernr='"+I+"',Beneficio='"+n+"')";switch(n){case"FUNSEJEM":i.Bplan=this.getView().byId("IdPlano_FUNSEJEM").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_FUNSEJEM").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_FUNSEJEM").setValueState("Success")}i.MargemFunsejem=this.getView().byId("IdMargemEmp").getValue();if(i.MargemFunsejem!==""){while(i.MargemFunsejem.indexOf(".")!==-1){i.MargemFunsejem=i.MargemFunsejem.replace(".","")}i.MargemFunsejem=i.MargemFunsejem.replace(",",".")}break;case"PLANO_MEDICO":i.Bplan=this.getView().byId("IdPlano_PLANO_MEDICO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PLANO_MEDICO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_PLANO_MEDICO").setValueState("Success")}i.CartMedica=this.getView().byId("idCartMedica").getValue();break;case"PLANO_ODONTOLOGICO":i.Bplan=this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").setValueState("Success")}i.CartDentista=this.getView().byId("IdCartDentista").getValue();break;case"SEGURO_DE_VIDA":i.Bplan=this.getView().byId("IdPlano_SEGURO_DE_VIDA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_SEGURO_DE_VIDA").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_SEGURO_DE_VIDA").setValueState("Success")}break;case"VALE_TRANSPORTE":i.Bplan=this.getView().byId("IdPlano_VALE_TRANSPORTE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_VALE_TRANSPORTE").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_VALE_TRANSPORTE").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_VALE_TRANSPORTE").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_VALE_TRANSPORTE").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_VALE_TRANSPORTE").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_VALE_TRANSPORTE").getValue();break;case"VALE_REFEICAO":i.Bplan=this.getView().byId("IdPlano_VALE_REFEICAO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_VALE_REFEICAO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_VALE_REFEICAO").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_VALE_REFEICAO").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_VALE_REFEICAO").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_VALE_REFEICAO").setValueState("Success")}break;case"AUXILIO_CRECHE":i.Bplan=this.getView().byId("IdPlano_AUXILIO_CRECHE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_AUXILIO_CRECHE").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_AUXILIO_CRECHE").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_AUXILIO_CRECHE").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_AUXILIO_CRECHE").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_AUXILIO_CRECHE").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_AUXILIO_CRECHE").getValue();break;case"COOPERATIVA":i.Rubrica=this.getView().byId("IdRubrica_COOPERATIVA").getValue();if(i.Rubrica===""){this.getView().byId("IdRubrica_COOPERATIVA").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdRubrica_COOPERATIVA").setValueState("Success")}i.Montante=this.getView().byId("IdMontanteCoop").getValue();i.Validade=this.getView().byId("IdValidadeCoop").getValue();i.Observacao=this.getView().byId("IdObservacao_COOPERATIVA").getValue();break;case"GREMIO_CLUBE":i.Bplan=this.getView().byId("IdPlano_GREMIO_CLUBE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_GREMIO_CLUBE").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdPlano_GREMIO_CLUBE").setValueState("Success")}i.Adesao=this.getView().byId("IdAdesao").getState();if(i.Adesao===true){i.Adesao="X"}else{i.Adesao=""}i.Observacao=this.getView().byId("IdObservacao_GREMIO_CLUBE").getValue();break;case"EMP_CONSIGINADO":i.Rubrica=this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").getSelectedKey();if(i.Rubrica===""){this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").setValueState("Success")}i.Montante=this.getView().byId("IdMontante_EMPRESTIMO_CONSIGINADO").getValue();i.Validade=this.getView().byId("IdValidade_EMPRESTIMO_CONSIGINADO").getValue();i.Observacao=this.getView().byId("IdObservacao_EMPRESTIMO_CONSIGINADO").getValue();break;case"FARMACIA":i.Bplan=this.getView().byId("IdPlano_FARMACIA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_FARMACIA").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_FARMACIA").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_FARMACIA").getValue();break;case"REEMBOLSO_SUBSIDIO":i.Bplan=this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").setValueState("Success")}i.Montante=this.getView().byId("IdMontante_REEMBOLSO_SUBSIDIO").getValue();i.Validade=this.getView().byId("IdValidade_REEMBOLSO_SUBSIDIO").getValue();i.Observacao=this.getView().byId("IdObservacao_REEMBOLSO_SUBSIDIO").getValue();break;case"ALIMENTACAO":i.Bplan=this.getView().byId("IdPlano_ALIMENTACAO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_ALIMENTACAO").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_ALIMENTACAO").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_ALIMENTACAO").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_ALIMENTACAO").setValueState("Error");sap.m.MessageBox.error("Informe as opções");return}else{this.getView().byId("IdOpcoes_ALIMENTACAO").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_ALIMENTACAO").getValue();break}i.Tipo="G";if(i.Montante!==""&&i.Montante!==undefined){while(i.Montante.indexOf(".")!==-1){i.Montante=i.Montante.replace(".","")}i.Montante=i.Montante.replace(",",".")}e=new a({title:"Confirmação",type:"Message",content:new o({text:"Confirma a inclusão do benefício?"}),beginButton:new s({text:"Sim",press:function(){t.update(d,i,{success:function(e,t){sap.m.MessageBox.success("Benefício salvo com sucesso.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){r.getRouter().navTo("BENEFICIOS")}})},error:function(e){sap.m.MessageBox.error("Erro ao chamar o serviço")}});e.close()}}),endButton:new s({text:"Não",press:function(){e.close()}}),afterClose:function(){e.destroy()}});e.open()},tirapontos:function(e){while(e.indexOf(".")!==-1){e=e.replace(".","")}while(e.indexOf(",")!==-1){e=e.replace(",",".")}return e},_bindView:function(e){var t=this.getView().getModel();t.setProperty("/busy",false);this.getView().bindElement({path:e,events:{change:this._onBindingChange.bind(this),dataRequested:function(){t.setProperty("/busy",true)},dataReceived:function(){t.setProperty("/busy",false)}}})},onAprovar:function(){var e;var t=this.getView().getModel();var i={};var r=this;var n=this.getView().byId("idTitleDependentes").getText();var I="0";switch(n){case"ALIMENTAÇÃO":n="ALIMENTACAO";break;case"PLANO MÉDICO":n="PLANO_MEDICO";break;case"PLANO ODONTOLÓGICO":n="PLANO_ODONTOLOGICO";break;case"REEMBOLSO SUBSIDIO":n="REEMBOLSO_SUBSIDIO";break;case"SEGURO DE VIDA":n="SEGURO_DE_VIDA";break;case"VALE TRANSPORTE":n="VALE_TRANSPORTE";break}var d="/ZET_GLHR_DETAIL_BENEFICIOSSet(Pernr='"+I+"',Beneficio='"+n+"')";i.Tipo="X";switch(n){case"FUNSEJEM":i.Bplan=this.getView().byId("IdPlano_FUNSEJEM").getSelectedKey();i.Beneficio=n;if(i.Bplan===""){this.getView().byId("IdPlano_FUNSEJEM").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_FUNSEJEM").setValueState("Success")}i.MargemFunsejem=this.getView().byId("IdMargemEmp").getValue();if(i.MargemFunsejem!==""){while(i.MargemFunsejem.indexOf(".")!==-1){i.MargemFunsejem=i.MargemFunsejem.replace(",00","")}i.MargemFunsejem=i.MargemFunsejem.replace(",00","")}break;case"PLANO_MEDICO":i.Bplan=this.getView().byId("IdPlano_PLANO_MEDICO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PLANO_MEDICO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_PLANO_MEDICO").setValueState("Success")}i.CartMedica=this.getView().byId("idCartMedica").getValue();break;case"PLANO_ODONTOLOGICO":i.Bplan=this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_PLANO_ODONTOLOGICO").setValueState("Success")}i.CartDentista=this.getView().byId("IdCartDentista").getValue();break;case"SEGURO_DE_VIDA":i.Bplan=this.getView().byId("IdPlano_SEGURO_DE_VIDA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_SEGURO_DE_VIDA").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_SEGURO_DE_VIDA").setValueState("Success")}break;case"VALE_TRANSPORTE":i.Bplan=this.getView().byId("IdPlano_VALE_TRANSPORTE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_VALE_TRANSPORTE").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_VALE_TRANSPORTE").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_VALE_TRANSPORTE").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_VALE_TRANSPORTE").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_VALE_TRANSPORTE").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_VALE_TRANSPORTE").getValue();break;case"VALE_REFEICAO":i.Bplan=this.getView().byId("IdPlano_VALE_REFEICAO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_VALE_REFEICAO").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_VALE_REFEICAO").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_VALE_REFEICAO").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_VALE_REFEICAO").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_VALE_REFEICAO").setValueState("Success")}break;case"AUXILIO_CRECHE":i.Bplan=this.getView().byId("IdPlano_AUXILIO_CRECHE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_AUXILIO_CRECHE").setValueState("Error");sap.m.MessageBox.error("Informe o plano");return}else{this.getView().byId("IdPlano_AUXILIO_CRECHE").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_AUXILIO_CRECHE").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_AUXILIO_CRECHE").setValueState("Error");sap.m.MessageBox.error("Informe a opção");return}else{this.getView().byId("IdOpcoes_AUXILIO_CRECHE").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_AUXILIO_CRECHE").getValue();break;case"COOPERATIVA":i.Rubrica=this.getView().byId("IdRubrica_COOPERATIVA").getvalue();if(i.Rubrica===""){this.getView().byId("IdRubrica_COOPERATIVA").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdRubrica_COOPERATIVA").setValueState("Success")}i.Montante=this.getView().byId("IdMontanteCoop").getValue();i.Validade=this.getView().byId("IdValidadeCoop").getValue();i.Observacao=this.getView().byId("IdObservacao_COOPERATIVA").getValue();break;case"GREMIO_CLUBE":i.Bplan=this.getView().byId("IdPlano_GREMIO_CLUBE").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_GREMIO_CLUBE").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdPlano_GREMIO_CLUBE").setValueState("Success")}i.Adesao=this.getView().byId("IdAdesao").getState();if(i.Adesao===true){i.Adesao="X"}else{i.Adesao=""}i.Observacao=this.getView().byId("IdObservacao_GREMIO_CLUBE").getValue();break;case"EMP_CONSIGINADO":i.Rubrica=this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").getSelectedKey();if(i.Rubrica===""){this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").setValueState("Error");sap.m.MessageBox.error("Informe a Rubrica");return}else{this.getView().byId("IdPlano_EMPRESTIMO_CONSIGINADO").setValueState("Success")}i.Montante=this.getView().byId("IdMontante_EMPRESTIMO_CONSIGINADO").getValue();i.Validade=this.getView().byId("IdValidade_EMPRESTIMO_CONSIGINADO").getValue();i.Observacao=this.getView().byId("IdObservacao_EMPRESTIMO_CONSIGINADO").getValue();break;case"FARMACIA":i.Bplan=this.getView().byId("IdPlano_FARMACIA").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_FARMACIA").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_FARMACIA").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_FARMACIA").getValue();break;case"REEMBOLSO_SUBSIDIO":i.Bplan=this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_REEMBOLSO_SUBSIDIO").setValueState("Success")}i.Montante=this.getView().byId("IdMontante_REEMBOLSO_SUBSIDIO").getValue();i.Validade=this.getView().byId("IdValidade_REEMBOLSO_SUBSIDIO").getValue();i.Observacao=this.getView().byId("IdObservacao_REEMBOLSO_SUBSIDIO").getValue();break;case"ALIMENTACAO":i.Bplan=this.getView().byId("IdPlano_ALIMENTACAO").getSelectedKey();if(i.Bplan===""){this.getView().byId("IdPlano_ALIMENTACAO").setValueState("Error");sap.m.MessageBox.error("Informe o Plano");return}else{this.getView().byId("IdPlano_ALIMENTACAO").setValueState("Success")}i.Opcoes=this.getView().byId("IdOpcoes_ALIMENTACAO").getSelectedKey();if(i.Opcoes===""){this.getView().byId("IdOpcoes_ALIMENTACAO").setValueState("Error");sap.m.MessageBox.error("Informe as opções");return}else{this.getView().byId("IdOpcoes_ALIMENTACAO").setValueState("Success")}i.Observacao=this.getView().byId("IdObservacao_ALIMENTACAO").getValue();break}i.Tipo="X";if(i.Montante!==""&&i.Montante!==undefined){while(i.Montante.indexOf(".")!==-1){i.Montante=i.Montante.replace(".","");i.Montante=i.Montante.replace(",",".")}i.Montante=i.Montante.replace(".","");i.Montante=i.Montante.replace(",",".")}e=new a({title:"Confirmação",type:"Message",content:new o({text:"Confirma a aprovação do benefício"+" "+n+" ?"}),beginButton:new s({text:"Sim",press:function(){t.update(d,i,{success:function(e,t){sap.m.MessageBox.success("Benefício"+" "+n+" "+"aprovado com sucesso.",{actions:["OK",sap.m.MessageBox.Action.CLOSE],onClose:function(e){r.getRouter().navTo("BENEFICIOS")}})},error:function(e){sap.m.MessageBox.error("Erro ao chamar o serviço")}});e.close()}}),endButton:new s({text:"Não",press:function(){e.close()}}),afterClose:function(){e.destroy()}});e.open()},_onBindingChange:function(){var e=this.getView(),t=e.getElementBinding();if(!t.getBoundContext()){this.getRouter().getTargets().display("detailObjectNotFound");return}var a=this.getView().byId("IdMargemEmp").getValue();if(a!==""){a=parseFloat(a).toFixed(2);while(a.indexOf(".")!==-1){a=a.replace(".",",")}a=this.adicionarpontoFloat(a);this.getView().byId("IdMargemEmp").setValue(a)}}})});