"use strict";function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach(function(t){_defineProperty(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function _defineProperty(e,t,o){if(t in e){Object.defineProperty(e,t,{value:o,enumerable:true,configurable:true,writable:true})}else{e[t]=o}return e}
/*!
 * SiTrack - Seguimiento de compras
 * (c) Copyright 2022 Innova Internacional S.A.S.
 */sap.ui.define(["./errorHandlers","sap/ui/core/IconPool","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/ui/Device","com/innova/model/constant","com/innova/model/models","com/innova/model/numberFormat","com/innova/service/petitions","com/innova/service/http"],function(e,t,o,n,s,i,r,a,c,d){return n.extend("com.innova.sitrack.Component",{metadata:{manifest:"json"},_sContentDensityClass:undefined,_sTimeoutId:undefined,_oTextPool:{},init:function e(){var t=this;for(var o=arguments.length,s=new Array(o),i=0;i<o;i++){s[i]=arguments[i]}n.prototype.init.apply(this,s);c.setModel(this.getModel("odata"));this._bindFonts();var a=r.createMainModel();this.setModel(a,"main");this.setModel(r.createStoreModel(),"store");this.setModel(r.createPaymentModel(),"payment");c.setModel(this.getModel("odata"));this.fecthInitialize(a).then(function(){document.title=t.getMessageTextPool("K061");t.getRouter().initialize();t.hideLoader(300)})},destroy:function e(){for(var t=arguments.length,o=new Array(t),s=0;s<t;s++){o[s]=arguments[s]}n.prototype.destroy.apply(this,o)},getContentDensityClass:function e(){if(this._sContentDensityClass===undefined){if(document.body.classList.contains("sapUiSizeCozy")||document.body.classList.contains("sapUiSizeCompact")){this._sContentDensityClass=""}else if(!s.support.touch){this._sContentDensityClass="sapUiSizeCompact"}else{this._sContentDensityClass="sapUiSizeCozy"}}return this._sContentDensityClass},errorHandler:function t(o){e(o)},getMessageTextPool:function e(t){var o=this._oTextPool;return Object.prototype.hasOwnProperty.call(o,t)?o[t]:""},hideLoader:function e(t){if(t&&t>0){if(this._sTimeoutId){clearTimeout(this._sTimeoutId);this._sTimeoutId=null}this._sTimeoutId=setTimeout(function(){document.getElementById("loader").style.display="none"},t)}},showLoader:function e(){document.getElementById("loader").style.display="block"},onNavBack:function e(){var t=o.getInstance().getPreviousHash();if(t!==undefined){window.history.go(-1)}else{this.getRouter().navTo("home",{},{},true)}},fecthInitialize:function e(t){var o=this;return c.post("".concat(i.GET_INITIALIZE)).then(function(e){var n=e.data;o._oTextPool=_objectSpread({},n.textPool);var s=n.sysParams,i=s.JWT,r=s.URL_API;t.setProperty("/catalog",_objectSpread({},n.catalog));t.setProperty("/textPool",o._oTextPool);t.setProperty("/sysParams",_objectSpread({},n.sysParams));t.setProperty("/showPayment",n.showPayment);t.setProperty("/zsigc",n.zsigc);t.setProperty("/bukrs",n.bukrs);t.setProperty("/ekgrp",n.ekgrp);t.setProperty("/ekorg",n.ekorg);t.setProperty("/logoAboutInnova",sap.ui.require.toUrl("com/innova/sitrack/img/logo-azul.png"));var c=n.sysParams.sepmil;var l=n.sysParams.sepdec;a.getNumberFormat(c,l);a.getFormatOptions(c,l);d.setInstance({token:i,baseURL:r})})},refreshToken:function e(){c.post("".concat(i.GET_INITIALIZE)).then(function(e){var t=e.data;var o=t.sysParams,n=o.JWT,s=o.URL_API;d.setInstance({token:n,baseURL:s})})},_bindFonts:function e(){t.addIcon("41","innova","innovaFonts","e900");t.addIcon("42","innova","innovaFonts","e901");t.addIcon("43","innova","innovaFonts","e902");t.addIcon("45","innova","innovaFonts","e903");t.addIcon("46","innova","innovaFonts","e904");t.addIcon("51","innova","innovaFonts","e905");t.addIcon("52","innova","innovaFonts","e906");t.addIcon("53","innova","innovaFonts","e907");var o={fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts/")};t.registerFont(o)}})});