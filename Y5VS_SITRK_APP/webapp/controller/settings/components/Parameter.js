"use strict";
/*!
 * SiTrack - Seguimiento de compras
 * (c) Copyright 2022 Innova Internacional S.A.S.
 */sap.ui.define(["com/innova/model/constant","com/innova/service/petitions","sap/base/util/deepExtend","sap/m/MessageBox"],function(e,t,r,a){return{onAddNewParameter:function e(){this.getView().getModel("Settings").setProperty("/IsCreateParameters",true);this.bCreateParameter=true;this._openParameterDialog()},onCreateorUpdateParameterPress:function e(){var t=r({},this.getView().getModel("Settings").getProperty("/createparameter"));if(this.bCreateParameter){t.IV_OPERATION="1";this._saveOrUpdateParameters(t)}else{t.IV_OPERATION="2";this._saveOrUpdateParameters(t)}},onParameterEditPress:function e(){var t=this.getView().getModel("Settings").getProperty("/selectedTableRow");if(t.length===0){a.error(this.getResourceBundle().getText("Settings.0029"));return}var i=t[0];this.getView().getModel("Settings").setProperty("/IsCreateParameters",false);this.bCreateParameter=false;this.getView().getModel("Settings").setProperty("/createparameter",r({},i));this._openParameterDialog(i)},onParameterDeletePress:function e(){var t=this.getView().getModel("Settings").getProperty("/selectedTableRow");if(t.length===0){a.error(this.getResourceBundle().getText("Settings.0029"));return}var r=t[0];r.IV_OPERATION="4";this._openDeleteRecordDialog("","",true,r)},_saveOrUpdateParameters:function r(a){t.post(e.PARAMETERS_SETTINGS,{IT_PARAMS:[{MANDT:"",PARNAME:a.PARNAME.trim(),PARLINE:a.PARLINE,PARVALUE:a.PARVALUE}],IV_OPERATION:a.IV_OPERATION}).then(this.getParameters.bind(this)).then(this.closeParameterDialog.bind(this)).then(this.clearSelectedIndex.bind(this)).catch(this.errorHandler.bind(this))},_openParameterDialog:function e(t){var r=this;this._oParameterDialog=sap.ui.core.Fragment.load({id:this.getView().getId(),name:"com.innova.sitrack.view.settings.fragment.CreateParameter",controller:this}).then(function(e){var a=e;r.getView().addDependent(a);a.addStyleClass(r.getOwnerComponent().getContentDensityClass());a.attachAfterClose(a.destroy.bind(a));if(!t){r.getModel("Settings").setProperty("/createparameter",{PARNAME:"",PARVALUE:"",PARLINE:""})}return a});this._oParameterDialog.then(function(e){e.open()})},closeParameterDialog:function e(){return this._oParameterDialog.then(function(e){e.close()})},getParameters:function r(){var a=this.getView().getModel("Settings");return t.post(e.PARAMETERS_SETTINGS,{IT_PARAMS:"",IV_OPERATION:"3"}).then(function(e){var t=e.data;a.setProperty("/parameters",t.data)})}}});